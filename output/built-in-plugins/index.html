<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Built-in Plugins - My Site</title>
    <meta name="description" content="Reference documentation for all 29 built-in markata-go plugins organized by lifecycle stage">
    
    <!-- Structured Data: OpenGraph -->
    
    
    <meta property="og:title" content="Built-in Plugins">
    
    <meta property="og:url" content="/built-in-plugins/">
    
    <meta property="og:type" content="article">
    
    <meta property="og:description" content="Reference documentation for all 29 built-in markata-go plugins organized by lifecycle stage">
    
    <meta property="og:locale" content="en_US">
    
    <meta property="article:published_time" content="2024-01-15T00:00:00Z">
    
    <meta property="article:tag" content="documentation">
    
    <meta property="article:tag" content="reference">
    
    <meta property="article:tag" content="plugins">
    
    
    
    <!-- Structured Data: Twitter Card -->
    
    
    <meta name="twitter:card" content="summary">
    
    <meta name="twitter:title" content="Built-in Plugins">
    
    <meta name="twitter:description" content="Reference documentation for all 29 built-in markata-go plugins organized by lifecycle stage">
    
    
    
    <!-- Canonical URL -->
    
    <link rel="canonical" href="/built-in-plugins/">
    
    
    <!-- Alternate Post Formats -->
    
    
    
    
    
    
    <!-- Pagefind Search CSS - Load before theme CSS so theme can override defaults -->
    
    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
    
    
    <!-- Theme CSS -->
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/admonitions.css">
    <link rel="stylesheet" href="/css/code.css">
    <link rel="stylesheet" href="/css/chroma.css">
    
    <!-- RSS/Atom/JSON Feeds -->
    
    
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml">
    
    
    
    
    
    
    <!-- Structured Data: JSON-LD -->
    
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Built-in Plugins",
  "description": "Reference documentation for all 29 built-in markata-go plugins organized by lifecycle stage",
  "datePublished": "2024-01-15T00:00:00Z",
  "dateModified": "2024-01-15T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/built-in-plugins/"
  },
  "keywords": [
    "documentation",
    "reference",
    "plugins"
  ],
  "url": "/built-in-plugins/"
}
    </script>
    
</head>
<body>
    
    <header class="site-header" data-pagefind-ignore>
        <div class="container">
            <a href="/" class="site-title">Home</a>
            





<nav class="site-nav site-nav--header site-nav--horizontal">
    
    <a href="/blog/" class="nav-link">Blog</a>
    
</nav>



            
            





<div id="search" class="search search--navbar" data-pagefind-ignore>
    <div id="pagefind-search"></div>
</div>



            
        </div>
    </header>
    
    
    <main data-pagefind-body>
        
<div class="content-wrapper">
    <article>
        <header>
            <h1>Built-in Plugins</h1>
            
            <time datetime="2024-01-15T00:00:00Z">January 15, 2024</time>
            
            
            <div class="tags">
                
                <a href="/tags/documentation/">documentation</a>
                
                <a href="/tags/reference/">reference</a>
                
                <a href="/tags/plugins/">plugins</a>
                
            </div>
            
        </header>
        <div class="post-content">
            <h1 id="built-in-plugins-reference">Built-in Plugins Reference</h1>
<p>This reference documents all built-in plugins that ship with markata-go. Plugins are organized by their lifecycle stage.</p>
<p><strong>Related guides:</strong></p>
<ul>
<li><a href="/plugin-development/" class="wikilink" data-title="Plugin Development" data-description="Guide to creating custom plugins for markata-go using the 9-stage lifecycle" data-date="2024-01-15">Plugin Development</a> - Create your own plugins</li>
<li><a href="/configuration-guide/" class="wikilink" data-title="Configuration Guide" data-description="Complete reference for markata-go configuration options, file formats, and environment variables" data-date="2024-01-15">Configuration</a> - Configure plugins</li>
<li><a href="/feeds-guide/" class="wikilink" data-title="Feeds Guide" data-description="Deep dive into markata-go&#39;s powerful feed system for creating filtered, sorted, paginated collections" data-date="2024-01-15">Feeds</a> - Feed plugins in detail</li>
</ul>
<h2 id="plugin-lifecycle-overview">Plugin Lifecycle Overview <a href="#plugin-lifecycle-overview" class="heading-anchor">#</a></h2>
<pre><code>Configure -&gt; Glob -&gt; Load -&gt; Transform -&gt; Render -&gt; Collect -&gt; Write -&gt; Cleanup
</code></pre>
<table>
<thead>
<tr>
<th>Stage</th>
<th>Purpose</th>
<th>Example Plugins</th>
</tr>
</thead>
<tbody>
<tr>
<td>Configure</td>
<td>Initialize plugin settings</td>
<td>templates</td>
</tr>
<tr>
<td>Glob</td>
<td>Discover content files</td>
<td>glob</td>
</tr>
<tr>
<td>Load</td>
<td>Parse files into posts</td>
<td>load, frontmatter</td>
</tr>
<tr>
<td>Transform</td>
<td>Pre-render modifications</td>
<td>description, reading_time, jinja_md, wikilinks, toc</td>
</tr>
<tr>
<td>Render</td>
<td>Convert content to HTML</td>
<td>render_markdown, templates, admonitions, heading_anchors, link_collector, mermaid, glossary, csv_fence, youtube</td>
</tr>
<tr>
<td>Collect</td>
<td>Build collections/feeds</td>
<td>feeds, auto_feeds, prevnext</td>
</tr>
<tr>
<td>Write</td>
<td>Output files to disk</td>
<td>publish_html, publish_feeds, sitemap, rss, atom, jsonfeed, static_assets, redirects</td>
</tr>
<tr>
<td>Cleanup</td>
<td>Post-build tasks</td>
<td>pagefind</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="glob-stage">Glob Stage <a href="#glob-stage" class="heading-anchor">#</a></h2>
<h3 id="glob">glob <a href="#glob" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>glob</code><br>
<strong>Stage:</strong> Glob<br>
<strong>Purpose:</strong> Discovers content files using configurable glob patterns with gitignore support.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">glob_patterns</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;**/*.md&#34;</span><span class="p">]</span>  <span class="c"># Patterns to match</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">glob</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">use_gitignore</span> <span class="p">=</span> <span class="kc">true</span>  <span class="c"># Respect .gitignore patterns</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Matches files against configured glob patterns (supports <code>**</code> recursive matching)</li>
<li>Excludes files matching <code>.gitignore</code> patterns if enabled</li>
<li>Deduplicates files matched by multiple patterns</li>
<li>Returns sorted list for deterministic builds</li>
</ol>
<p><strong>Example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">glob_patterns</span> <span class="p">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;posts/**/*.md&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;pages/*.md&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;docs/**/*.md&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">glob</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">use_gitignore</span> <span class="p">=</span> <span class="kc">true</span>
</span></span></code></pre><hr>
<h2 id="load-stage">Load Stage <a href="#load-stage" class="heading-anchor">#</a></h2>
<h3 id="load">load <a href="#load" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>load</code><br>
<strong>Stage:</strong> Load<br>
<strong>Purpose:</strong> Reads discovered files and parses them into Post objects with frontmatter and content.</p>
<p><strong>Configuration:</strong> None (uses <code>content_dir</code> from main config)</p>
<p><strong>Behavior:</strong></p>
<ol>
<li>Reads each file as UTF-8</li>
<li>Extracts YAML frontmatter between <code>---</code> delimiters</li>
<li>Creates Post object with parsed metadata and content</li>
<li>Generates slug from frontmatter, title, or filename</li>
<li>Generates href as <code>/{slug}/</code></li>
</ol>
<p><strong>Post fields set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td>string</td>
<td>Source file path</td>
</tr>
<tr>
<td><code>content</code></td>
<td>string</td>
<td>Raw markdown content (after frontmatter)</td>
</tr>
<tr>
<td><code>slug</code></td>
<td>string</td>
<td>URL-friendly identifier</td>
</tr>
<tr>
<td><code>href</code></td>
<td>string</td>
<td>URL path (<code>/{slug}/</code>)</td>
</tr>
<tr>
<td><code>title</code></td>
<td>*string</td>
<td>From frontmatter</td>
</tr>
<tr>
<td><code>date</code></td>
<td>*time.Time</td>
<td>From frontmatter</td>
</tr>
<tr>
<td><code>published</code></td>
<td>bool</td>
<td>From frontmatter (default: false)</td>
</tr>
<tr>
<td><code>draft</code></td>
<td>bool</td>
<td>From frontmatter (default: false)</td>
</tr>
<tr>
<td><code>skip</code></td>
<td>bool</td>
<td>From frontmatter (default: false)</td>
</tr>
<tr>
<td><code>tags</code></td>
<td>[]string</td>
<td>From frontmatter</td>
</tr>
<tr>
<td><code>description</code></td>
<td>*string</td>
<td>From frontmatter</td>
</tr>
<tr>
<td><code>template</code></td>
<td>string</td>
<td>Template name from frontmatter</td>
</tr>
</tbody>
</table>
<p><strong>Supported date formats:</strong></p>
<ul>
<li>RFC3339: <code>2024-01-15T10:30:00Z</code></li>
<li>ISO datetime: <code>2024-01-15T10:30:00</code></li>
<li>ISO datetime with space: <code>2024-01-15 10:30:00</code></li>
<li>ISO date: <code>2024-01-15</code></li>
<li>US format: <code>01/15/2024</code></li>
<li>European format: <code>15-01-2024</code></li>
<li>Long format: <code>January 15, 2024</code></li>
<li>Short format: <code>Jan 15, 2024</code></li>
</ul>
<hr>
<h3 id="frontmatter">frontmatter <a href="#frontmatter" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>frontmatter</code><br>
<strong>Stage:</strong> Load (utility)<br>
<strong>Purpose:</strong> Parses YAML frontmatter from markdown files. Used internally by the <code>load</code> plugin.</p>
<p><strong>Behavior:</strong></p>
<ul>
<li>Extracts content between <code>---</code> delimiters</li>
<li>Parses YAML into a map</li>
<li>Handles edge cases: no frontmatter, empty frontmatter, unclosed delimiters</li>
</ul>
<p><strong>Example frontmatter:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">My Post</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">date</span><span class="p">:</span><span class="w"> </span><span class="ld">2024-01-15</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">tags</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">go</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">programming</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">A short description</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l">post.html</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">custom_field</span><span class="p">:</span><span class="w"> </span><span class="l">custom value</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w">
</span></span></span></code></pre><hr>
<h2 id="transform-stage">Transform Stage <a href="#transform-stage" class="heading-anchor">#</a></h2>
<h3 id="auto-title">auto_title <a href="#auto-title" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>auto_title</code><br>
<strong>Stage:</strong> Transform (first priority)<br>
<strong>Purpose:</strong> Auto-generates human-readable titles for posts that don't have one by deriving them from filenames.</p>
<p><strong>Configuration:</strong> None required.</p>
<p><strong>Behavior:</strong></p>
<ol>
<li>Runs with highest priority in Transform stage (before other transform plugins)</li>
<li>Skips posts that already have a title set</li>
<li>Extracts the filename without extension</li>
<li>Replaces hyphens and underscores with spaces</li>
<li>Applies title case (first letter of each word capitalized)</li>
<li>Sets <code>post.Title</code></li>
</ol>
<p><strong>Post fields set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>title</code></td>
<td>*string</td>
<td>Generated title (if not already set)</td>
</tr>
</tbody>
</table>
<p><strong>Example transformations:</strong></p>
<table>
<thead>
<tr>
<th>Filename</th>
<th>Generated Title</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>my-first-post.md</code></td>
<td>&quot;My First Post&quot;</td>
</tr>
<tr>
<td><code>getting_started_guide.md</code></td>
<td>&quot;Getting Started Guide&quot;</td>
</tr>
<tr>
<td><code>hello-world.md</code></td>
<td>&quot;Hello World&quot;</td>
</tr>
<tr>
<td><code>2024-01-15-release-notes.md</code></td>
<td>&quot;2024 01 15 Release Notes&quot;</td>
</tr>
</tbody>
</table>
<p><strong>When to use:</strong></p>
<ul>
<li>For quick drafts where you want titles auto-derived</li>
<li>When filenames already describe the content well</li>
<li>For sites with many posts where manual titling is tedious</li>
</ul>
<p><strong>Limitations:</strong></p>
<ul>
<li>Does not extract titles from H1 headings in content (only uses filename)</li>
<li>Numeric prefixes in filenames (like dates) become part of the title</li>
<li>Special characters are kept as-is (not removed or transformed)</li>
</ul>
<hr>
<h3 id="description">description <a href="#description" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>description</code><br>
<strong>Stage:</strong> Transform<br>
<strong>Purpose:</strong> Auto-generates meta descriptions for posts that don't have one by extracting the first paragraph.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">description_max_length</span> <span class="p">=</span> <span class="mi">160</span>  <span class="c"># Maximum characters (default: 160)</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Skips posts that already have a description</li>
<li>Extracts first paragraph from content</li>
<li>Strips markdown formatting (links, images, code, emphasis, headers, HTML)</li>
<li>Truncates at word boundary with ellipsis</li>
<li>Sets <code>post.Description</code></li>
</ol>
<p><strong>Post fields set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>description</code></td>
<td>*string</td>
<td>Generated description (if not already set)</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">title: My Post
</span></span><span class="line"><span class="cl"><span class="gh"># No description - will be auto-generated
</span></span></span><span class="line"><span class="cl"><span class="gh"></span>---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">This is my first paragraph that will become the description.
</span></span><span class="line"><span class="cl">It continues here but will be truncated at 160 characters...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Second Section
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>More content here.
</span></span></code></pre><hr>
<h3 id="reading-time">reading_time <a href="#reading-time" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>reading_time</code><br>
<strong>Stage:</strong> Transform<br>
<strong>Purpose:</strong> Calculates word count and estimated reading time for each post.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">words_per_minute</span> <span class="p">=</span> <span class="mi">200</span>  <span class="c"># Average reading speed (default: 200)</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Counts words in content (excludes code blocks, URLs, HTML)</li>
<li>Calculates reading time based on words per minute</li>
<li>Rounds up to nearest minute (minimum 1 minute)</li>
<li>Stores results in post's Extra map</li>
</ol>
<p><strong>Post fields added (in <code>Extra</code>):</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>word_count</code></td>
<td>int</td>
<td>Number of words</td>
</tr>
<tr>
<td><code>reading_time</code></td>
<td>int</td>
<td>Minutes to read</td>
</tr>
<tr>
<td><code>reading_time_text</code></td>
<td>string</td>
<td>Formatted string (e.g., &quot;5 min read&quot;)</td>
</tr>
</tbody>
</table>
<p><strong>Template usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;reading-time&#34;</span><span class="p">&gt;</span>{{ post.Extra.reading_time_text }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;word-count&#34;</span><span class="p">&gt;</span>{{ post.Extra.word_count }} words<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span></code></pre><hr>
<h3 id="jinja-md">jinja_md <a href="#jinja-md" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>jinja_md</code><br>
<strong>Stage:</strong> Transform<br>
<strong>Purpose:</strong> Processes Jinja2 template expressions within markdown content before rendering.</p>
<p><strong>Configuration:</strong> Requires <code>jinja: true</code> in post frontmatter.</p>
<p><strong>Activation:</strong>
Posts must explicitly enable Jinja processing:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">Dynamic Post</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">jinja</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w">
</span></span></span></code></pre><p><strong>Template context:</strong></p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>post</code></td>
<td>Post</td>
<td>Current post object</td>
</tr>
<tr>
<td><code>config</code></td>
<td>Config</td>
<td>Site configuration</td>
</tr>
<tr>
<td><code>posts</code></td>
<td>[]Post</td>
<td>All posts</td>
</tr>
<tr>
<td><code>core</code></td>
<td>Manager</td>
<td>Lifecycle manager for filtering</td>
</tr>
<tr>
<td><code>filter</code></td>
<td>func</td>
<td>Filter posts by expression</td>
</tr>
<tr>
<td><code>map</code></td>
<td>func</td>
<td>Map field values from posts</td>
</tr>
</tbody>
</table>
<p><strong>Example content:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">title: Recent Posts Index
</span></span><span class="line"><span class="cl">jinja: true
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gh"># Latest Posts
</span></span></span><span class="line"><span class="cl"><span class="gh"></span>
</span></span><span class="line"><span class="cl">{% for p in filter(&#34;published == true&#34;)[:5] %}
</span></span><span class="line"><span class="cl"><span class="k">-</span> [<span class="nt">{{ p.Title }}</span>](<span class="na">{{ p.Href }}</span>) - {{ p.Date.Format &#34;Jan 2, 2006&#34; }}
</span></span><span class="line"><span class="cl">{% endfor %}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## All Tags
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>{% for tag in map(&#34;tags&#34;, &#34;published == true&#34;, &#34;date&#34;, true) %}
</span></span><span class="line"><span class="cl"><span class="k">-</span> {{ tag }}
</span></span><span class="line"><span class="cl">{% endfor %}
</span></span></code></pre><hr>
<h3 id="wikilinks">wikilinks <a href="#wikilinks" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>wikilinks</code><br>
<strong>Stage:</strong> Transform<br>
<strong>Purpose:</strong> Transforms <code>[[slug]]</code> and <code>[[slug|text]]</code> wikilink syntax into HTML anchor tags.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">wikilinks_warn_broken</span> <span class="p">=</span> <span class="kc">true</span>  <span class="c"># Warn about broken links (default: true)</span>
</span></span></code></pre><p><strong>Syntax:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">Link to another post: [[other-post-slug]]
</span></span><span class="line"><span class="cl">With custom text: [[other-post-slug|Click here to read more]]
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Finds all <code>[[...]]</code> patterns in content</li>
<li>Looks up target post by slug (case-insensitive)</li>
<li>If found: converts to <code>&lt;a href=&quot;/slug/&quot;&gt;Title&lt;/a&gt;</code></li>
<li>If not found: keeps original syntax, adds warning to post</li>
</ol>
<p><strong>Post fields added (in <code>Extra</code>):</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wikilink_warnings</code></td>
<td>[]string</td>
<td>List of broken wikilink warnings</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">Check out my [[getting-started]] guide.
</span></span><span class="line"><span class="cl">You might also like [[advanced-topics|the advanced guide]].
</span></span></code></pre><p>Becomes:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">Check out my <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/getting-started/&#34;</span><span class="p">&gt;</span>Getting Started<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> guide.
</span></span><span class="line"><span class="cl">You might also like <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/advanced-topics/&#34;</span><span class="p">&gt;</span>the advanced guide<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
</span></span></code></pre><hr>
<h3 id="toc">toc <a href="#toc" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>toc</code><br>
<strong>Stage:</strong> Transform<br>
<strong>Purpose:</strong> Extracts headings from markdown and builds a hierarchical table of contents.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">toc_min_level</span> <span class="p">=</span> <span class="mi">2</span>  <span class="c"># Minimum heading level (default: 2, h2)</span>
</span></span><span class="line"><span class="cl"><span class="nx">toc_max_level</span> <span class="p">=</span> <span class="mi">4</span>  <span class="c"># Maximum heading level (default: 4, h4)</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Parses ATX-style headings (<code># Heading</code>)</li>
<li>Generates URL-safe IDs from heading text</li>
<li>Handles duplicate IDs by appending numbers</li>
<li>Builds hierarchical structure</li>
</ol>
<p><strong>Post fields added (in <code>Extra</code>):</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>toc</code></td>
<td>[]TocEntry</td>
<td>Hierarchical table of contents</td>
</tr>
</tbody>
</table>
<p><strong>TocEntry structure:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">TocEntry</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Level</span>    <span class="kt">int</span>         <span class="c1">// Heading level (2-6)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Text</span>     <span class="kt">string</span>      <span class="c1">// Heading text
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">ID</span>       <span class="kt">string</span>      <span class="c1">// Anchor ID
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Children</span> <span class="p">[]</span><span class="o">*</span><span class="nx">TocEntry</span> <span class="c1">// Nested headings
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre><p><strong>Template usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">{% if post.Extra.toc %}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;toc&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Table of Contents<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% for entry in post.Extra.toc %}
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#{{ entry.ID }}&#34;</span><span class="p">&gt;</span>{{ entry.Text }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            {% if entry.Children %}
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            {% for child in entry.Children %}
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#{{ child.ID }}&#34;</span><span class="p">&gt;</span>{{ child.Text }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            {% endfor %}
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            {% endif %}
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% endfor %}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{% endif %}
</span></span></code></pre><hr>
<h2 id="render-stage">Render Stage <a href="#render-stage" class="heading-anchor">#</a></h2>
<h3 id="admonitions">admonitions <a href="#admonitions" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>admonitions</code><br>
<strong>Stage:</strong> Render (goldmark extension)<br>
<strong>Purpose:</strong> Renders admonition blocks (notes, warnings, tips) from markdown.</p>
<p><strong>Syntax:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">!!! note &#34;Optional Title&#34;
</span></span><span class="line"><span class="cl">    Content of the note goes here.
</span></span><span class="line"><span class="cl">    Must be indented with 4 spaces.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">!!! warning
</span></span><span class="line"><span class="cl">    Default title will be &#34;Warning&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">!!! tip &#34;Pro Tip&#34;
</span></span><span class="line"><span class="cl">    Helpful information here.
</span></span></code></pre><p><strong>Supported types:</strong></p>
<ul>
<li><code>note</code> - General information</li>
<li><code>warning</code> - Caution/warning</li>
<li><code>tip</code> - Helpful tips</li>
<li><code>important</code> - Important information</li>
<li><code>danger</code> - Dangerous/critical warnings</li>
<li><code>caution</code> - Proceed with care</li>
</ul>
<p><strong>HTML output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;admonition note&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;admonition-title&#34;</span><span class="p">&gt;</span>Note<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Content of the note goes here.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>CSS styling:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">admonition</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-left</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span> <span class="kc">solid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">admonition</span><span class="p">.</span><span class="nc">note</span> <span class="p">{</span> <span class="k">border-color</span><span class="p">:</span> <span class="mh">#448aff</span><span class="p">;</span> <span class="k">background</span><span class="p">:</span> <span class="mh">#e3f2fd</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">admonition</span><span class="p">.</span><span class="nc">warning</span> <span class="p">{</span> <span class="k">border-color</span><span class="p">:</span> <span class="mh">#ff9800</span><span class="p">;</span> <span class="k">background</span><span class="p">:</span> <span class="mh">#fff3e0</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">admonition</span><span class="p">.</span><span class="nc">tip</span> <span class="p">{</span> <span class="k">border-color</span><span class="p">:</span> <span class="mh">#4caf50</span><span class="p">;</span> <span class="k">background</span><span class="p">:</span> <span class="mh">#e8f5e9</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">admonition</span><span class="p">.</span><span class="nc">danger</span> <span class="p">{</span> <span class="k">border-color</span><span class="p">:</span> <span class="mh">#f44336</span><span class="p">;</span> <span class="k">background</span><span class="p">:</span> <span class="mh">#ffebee</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">admonition-title</span> <span class="p">{</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span> <span class="k">margin-bottom</span><span class="p">:</span> <span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span> <span class="p">}</span>
</span></span></code></pre><hr>
<h3 id="render-markdown">render_markdown <a href="#render-markdown" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>render_markdown</code><br>
<strong>Stage:</strong> Render<br>
<strong>Purpose:</strong> Converts markdown content to HTML using goldmark with extensions.</p>
<p><strong>Configuration:</strong> None (extensions enabled by default)</p>
<p><strong>Enabled extensions:</strong></p>
<ul>
<li><strong>GFM</strong> - GitHub Flavored Markdown (tables, strikethrough, autolinks, task lists)</li>
<li><strong>Syntax Highlighting</strong> - Code block highlighting with Chroma (monokai theme)</li>
<li><strong>Admonitions</strong> - Note/warning blocks</li>
<li><strong>Auto Heading IDs</strong> - Generates IDs for headings</li>
</ul>
<p><strong>Behavior:</strong></p>
<ol>
<li>Takes <code>post.Content</code> (raw markdown)</li>
<li>Converts to HTML with all extensions</li>
<li>Stores result in <code>post.ArticleHTML</code></li>
</ol>
<p><strong>Post fields set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>article_html</code></td>
<td>string</td>
<td>Rendered HTML content</td>
</tr>
</tbody>
</table>
<p><strong>Supported markdown features:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="gu">## Tables
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>| Header | Header |
</span></span><span class="line"><span class="cl">|--------|--------|
</span></span><span class="line"><span class="cl">| Cell   | Cell   |
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Task Lists
</span></span></span><span class="line"><span class="cl"><span class="gu"></span><span class="k">- [x]</span> Completed task
</span></span><span class="line"><span class="cl"><span class="k">- [ ]</span> Pending task
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Strikethrough
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>~~deleted text~~
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## Code Blocks
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>```go
</span></span><span class="line"><span class="cl">func main() {
</span></span><span class="line"><span class="cl">    fmt.Println(&#34;Syntax highlighted!&#34;)
</span></span><span class="line"><span class="cl">}
</span></span></code></pre><h2 id="footnotes">Footnotes <a href="#footnotes" class="heading-anchor">#</a></h2>
<p>Here's a sentence with a footnote.[^1]</p>
<p>[^1]: This is the footnote content.</p>
<pre><code>
---

### templates

**Name:** `templates`  
**Stage:** Render  
**Purpose:** Wraps rendered markdown content in HTML templates with theme support.

**Configuration (TOML):**
```toml
[markata]
templates_dir = &quot;templates&quot;  # Templates directory (default: &quot;templates&quot;)
theme = &quot;default&quot;            # Theme name (default: &quot;default&quot;)

# Or with theme options:
[markata.theme]
name = &quot;default&quot;
</code></pre>
<p><strong>Behavior:</strong></p>
<ol>
<li>Looks up template from <code>post.Template</code> (default: <code>post.html</code>)</li>
<li>Renders template with post context</li>
<li>Falls back to raw <code>ArticleHTML</code> if no template exists</li>
<li>Stores result in <code>post.HTML</code></li>
</ol>
<p><strong>Template context:</strong></p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>post</code></td>
<td>Post</td>
<td>Current post</td>
</tr>
<tr>
<td><code>body</code></td>
<td>string</td>
<td><code>post.ArticleHTML</code></td>
</tr>
<tr>
<td><code>config</code></td>
<td>Config</td>
<td>Site configuration</td>
</tr>
<tr>
<td><code>core</code></td>
<td>Manager</td>
<td>Lifecycle manager</td>
</tr>
</tbody>
</table>
<p><strong>Post fields set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>html</code></td>
<td>string</td>
<td>Final HTML (content + template)</td>
</tr>
</tbody>
</table>
<p><strong>Example template (<code>templates/post.html</code>):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ post.Title }} | {{ config.Title }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;{{ post.Description }}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ post.Title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">time</span><span class="p">&gt;</span>{{ post.Date.Format &#34;January 2, 2006&#34; }}<span class="p">&lt;/</span><span class="nt">time</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content&#34;</span><span class="p">&gt;</span>{{ body | safe }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre><hr>
<h3 id="heading-anchors">heading_anchors <a href="#heading-anchors" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>heading_anchors</code><br>
<strong>Stage:</strong> Render (post_render)<br>
<strong>Purpose:</strong> Adds clickable anchor links to headings in rendered HTML for easy linking to sections.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">heading_anchors</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>        <span class="c"># Enable/disable the plugin (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">min_level</span> <span class="p">=</span> <span class="mi">2</span>         <span class="c"># Minimum heading level to process (default: 2, h2)</span>
</span></span><span class="line"><span class="cl"><span class="nx">max_level</span> <span class="p">=</span> <span class="mi">4</span>         <span class="c"># Maximum heading level to process (default: 4, h4)</span>
</span></span><span class="line"><span class="cl"><span class="nx">position</span> <span class="p">=</span> <span class="s2">&#34;end&#34;</span>      <span class="c"># Anchor position: &#34;start&#34; or &#34;end&#34; (default: &#34;end&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="nx">symbol</span> <span class="p">=</span> <span class="s2">&#34;#&#34;</span>          <span class="c"># Link text for the anchor (default: &#34;#&#34;)</span>
</span></span><span class="line"><span class="cl"><span class="nx">class</span> <span class="p">=</span> <span class="s2">&#34;heading-anchor&#34;</span>  <span class="c"># CSS class for the anchor link (default: &#34;heading-anchor&#34;)</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Runs after <code>render_markdown</code> to process <code>ArticleHTML</code></li>
<li>Finds all heading tags within the configured level range</li>
<li>Extracts existing IDs or generates URL-safe IDs from heading text</li>
<li>Handles duplicate IDs by appending numbers (e.g., <code>my-heading</code>, <code>my-heading-1</code>)</li>
<li>Inserts anchor link at the configured position (start or end of heading)</li>
</ol>
<p><strong>HTML output example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c">&lt;!-- Input (from render_markdown) --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getting-started&#34;</span><span class="p">&gt;</span>Getting Started<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- Output (with default config, position=&#34;end&#34;) --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getting-started&#34;</span><span class="p">&gt;</span>Getting Started <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#getting-started&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;heading-anchor&#34;</span><span class="p">&gt;</span>#<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- Output (with position=&#34;start&#34;) --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h2</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;getting-started&#34;</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#getting-started&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;heading-anchor&#34;</span><span class="p">&gt;</span>#<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> Getting Started<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>CSS styling:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">heading-anchor</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin-left</span><span class="p">:</span> <span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">color</span><span class="p">:</span> <span class="mh">#666</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nt">h2</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">heading-anchor</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">h3</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">heading-anchor</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="nt">h4</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">heading-anchor</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">opacity</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><hr>
<h3 id="md-video">md_video <a href="#md-video" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>md_video</code><br>
<strong>Stage:</strong> Render (post_render)<br>
<strong>Purpose:</strong> Converts markdown image syntax for video files into HTML video elements with GIF-like autoplay behavior by default.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">md_video</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>                    <span class="c"># Enable the plugin (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">video_extensions</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;.mp4&#34;</span><span class="p">,</span> <span class="s2">&#34;.webm&#34;</span><span class="p">,</span> <span class="s2">&#34;.ogg&#34;</span><span class="p">,</span> <span class="s2">&#34;.ogv&#34;</span><span class="p">,</span> <span class="s2">&#34;.mov&#34;</span><span class="p">,</span> <span class="s2">&#34;.m4v&#34;</span><span class="p">]</span>  <span class="c"># Extensions to treat as video</span>
</span></span><span class="line"><span class="cl"><span class="nx">video_class</span> <span class="p">=</span> <span class="s2">&#34;md-video&#34;</span>          <span class="c"># CSS class for video elements (default)</span>
</span></span><span class="line"><span class="cl"><span class="nx">controls</span> <span class="p">=</span> <span class="kc">true</span>                   <span class="c"># Show video controls (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">autoplay</span> <span class="p">=</span> <span class="kc">true</span>                   <span class="c"># Auto-start playback (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">loop</span> <span class="p">=</span> <span class="kc">true</span>                       <span class="c"># Loop video continuously (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">muted</span> <span class="p">=</span> <span class="kc">true</span>                      <span class="c"># Mute audio (default: true, required for autoplay)</span>
</span></span><span class="line"><span class="cl"><span class="nx">playsinline</span> <span class="p">=</span> <span class="kc">true</span>                <span class="c"># Play inline on mobile (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">preload</span> <span class="p">=</span> <span class="s2">&#34;metadata&#34;</span>              <span class="c"># Preload hint: &#34;none&#34;, &#34;metadata&#34;, &#34;auto&#34; (default: &#34;metadata&#34;)</span>
</span></span></code></pre><p><strong>Why GIF-like defaults?</strong></p>
<p>The default configuration mimics animated GIF behavior because most embedded videos in blog posts are short demonstrations, screen recordings, or animations. Users expect these to play automatically without sound, similar to GIFs.</p>
<p>To use traditional video behavior (click to play with sound):</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">md_video</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">autoplay</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="nx">loop</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="nx">muted</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="nx">controls</span> <span class="p">=</span> <span class="kc">true</span>
</span></span></code></pre><p><strong>Markdown usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">![<span class="nt">kickflip down the 3 stair - fingerboarding</span>](<span class="na">https://example.com/video.mp4</span>)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">![<span class="nt">Demo of the feature</span>](<span class="na">demo.webm</span>)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">![<span class="nt">Screen recording</span>](<span class="na">screen.mp4?width=500</span>)
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Scans <code>ArticleHTML</code> for <code>&lt;img&gt;</code> tags after markdown rendering</li>
<li>Checks if the <code>src</code> attribute ends with a video extension (handles query parameters)</li>
<li>Replaces matching <code>&lt;img&gt;</code> tags with <code>&lt;video&gt;</code> elements</li>
<li>Preserves the <code>alt</code> text as fallback content</li>
<li>Automatically detects MIME type from file extension</li>
</ol>
<p><strong>HTML output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">video</span> <span class="na">autoplay</span> <span class="na">loop</span> <span class="na">muted</span> <span class="na">playsinline</span> <span class="na">controls</span> <span class="na">preload</span><span class="o">=</span><span class="s">&#34;metadata&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;md-video&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">source</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://example.com/video.mp4&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;video/mp4&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  kickflip down the 3 stair - fingerboarding
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">video</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>MIME type detection:</strong></p>
<table>
<thead>
<tr>
<th>Extension</th>
<th>MIME Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.mp4</code></td>
<td><code>video/mp4</code></td>
</tr>
<tr>
<td><code>.webm</code></td>
<td><code>video/webm</code></td>
</tr>
<tr>
<td><code>.ogg</code>, <code>.ogv</code></td>
<td><code>video/ogg</code></td>
</tr>
<tr>
<td><code>.mov</code></td>
<td><code>video/quicktime</code></td>
</tr>
<tr>
<td><code>.m4v</code></td>
<td><code>video/x-m4v</code></td>
</tr>
<tr>
<td><code>.avi</code></td>
<td><code>video/x-msvideo</code></td>
</tr>
</tbody>
</table>
<p><strong>CSS styling:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">md-video</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">max-width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">height</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><hr>
<h3 id="youtube">youtube <a href="#youtube" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>youtube</code><br>
<strong>Stage:</strong> Render (post_render)<br>
<strong>Purpose:</strong> Converts YouTube URLs on their own line into responsive embedded iframes with privacy-enhanced mode by default.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">youtube</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>              <span class="c"># Enable the plugin (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">privacy_enhanced</span> <span class="p">=</span> <span class="kc">true</span>     <span class="c"># Use youtube-nocookie.com (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">container_class</span> <span class="p">=</span> <span class="s2">&#34;youtube-embed&#34;</span>  <span class="c"># CSS class for container (default)</span>
</span></span><span class="line"><span class="cl"><span class="nx">lazy_load</span> <span class="p">=</span> <span class="kc">true</span>            <span class="c"># Enable lazy loading (default: true)</span>
</span></span></code></pre><p><strong>Markdown usage:</strong></p>
<p>Simply paste a YouTube URL on its own line:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">Check out this video:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">https://www.youtube.com/watch?v=dQw4w9WgXcQ
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">More content below...
</span></span></code></pre><p><strong>Supported URL formats:</strong></p>
<ul>
<li><code>https://www.youtube.com/watch?v=VIDEO_ID</code></li>
<li><code>https://youtube.com/watch?v=VIDEO_ID</code></li>
<li><code>https://m.youtube.com/watch?v=VIDEO_ID</code></li>
<li><code>https://youtu.be/VIDEO_ID</code></li>
<li>URLs with extra parameters like <code>&amp;t=30</code> (timestamp is ignored in embed)</li>
</ul>
<p><strong>HTML output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;youtube-embed&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">iframe</span>
</span></span><span class="line"><span class="cl">    <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">title</span><span class="o">=</span><span class="s">&#34;YouTube video player&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">frameborder</span><span class="o">=</span><span class="s">&#34;0&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">allow</span><span class="o">=</span><span class="s">&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">allowfullscreen</span>
</span></span><span class="line"><span class="cl">    <span class="na">loading</span><span class="o">=</span><span class="s">&#34;lazy&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>Privacy-enhanced mode:</strong></p>
<p>By default, the plugin uses <code>youtube-nocookie.com</code> which prevents YouTube from storing cookies on visitors' browsers until they play the video. Disable this for standard embeds:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">youtube</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">privacy_enhanced</span> <span class="p">=</span> <span class="kc">false</span>
</span></span></code></pre><p><strong>CSS styling (included in default theme):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">youtube-embed</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">padding-bottom</span><span class="p">:</span> <span class="mf">56.25</span><span class="kt">%</span><span class="p">;</span> <span class="c">/* 16:9 aspect ratio */</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">max-width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">margin</span><span class="p">:</span> <span class="mf">1.5</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">border-radius</span><span class="p">:</span> <span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">youtube-embed</span> <span class="nt">iframe</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">border-radius</span><span class="p">:</span> <span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Scans <code>ArticleHTML</code> for YouTube URLs in standalone <code>&lt;p&gt;</code> tags</li>
<li>URLs inside code blocks or inline with text are NOT converted</li>
<li>Extracts the 11-character video ID from the URL</li>
<li>Generates responsive embed with configurable privacy mode</li>
<li>Adds lazy loading by default for better page performance</li>
</ol>
<p><strong>Notes:</strong></p>
<ul>
<li>URLs must be on their own line (in their own <code>&lt;p&gt;</code> tag) to be converted</li>
<li>Inline URLs like &quot;Check out <a href="https://youtube.com/watch?v=xyz%22">https://youtube.com/watch?v=xyz&quot;</a> are preserved as text</li>
<li>Invalid video IDs (not exactly 11 characters) are ignored</li>
</ul>
<hr>
<h3 id="link-collector">link_collector <a href="#link-collector" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>link_collector</code><br>
<strong>Stage:</strong> Render (post_render)<br>
<strong>Purpose:</strong> Collects all hyperlinks from posts and tracks inlinks (pages linking TO a post) and outlinks (pages a post links TO).</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">link_collector</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">include_feeds</span> <span class="p">=</span> <span class="kc">false</span>  <span class="c"># Include feed pages in inlinks (default: false)</span>
</span></span><span class="line"><span class="cl"><span class="nx">include_index</span> <span class="p">=</span> <span class="kc">false</span>  <span class="c"># Include index page in inlinks (default: false)</span>
</span></span></code></pre><p><strong>Note:</strong> The plugin also reads <code>url</code> from <code>config.Extra</code> to determine internal vs external links.</p>
<p><strong>Behavior:</strong></p>
<ol>
<li>Runs after <code>render_markdown</code> to process <code>ArticleHTML</code></li>
<li>Extracts all <code>&lt;a href=&quot;...&quot;&gt;</code> links from each post</li>
<li>Resolves relative URLs against the post's URL</li>
<li>Distinguishes internal links (same domain) from external links</li>
<li>Looks up target posts for internal links</li>
<li>Populates <code>Inlinks</code> and <code>Outlinks</code> on each post</li>
<li>Stores all links in cache for use by other plugins</li>
</ol>
<p><strong>Post fields set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hrefs</code></td>
<td>[]string</td>
<td>All href values found in the post</td>
</tr>
<tr>
<td><code>inlinks</code></td>
<td>[]*Link</td>
<td>Links from other posts pointing to this post</td>
</tr>
<tr>
<td><code>outlinks</code></td>
<td>[]*Link</td>
<td>Links from this post to other pages</td>
</tr>
</tbody>
</table>
<p><strong>Link structure:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Link</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">SourceURL</span>    <span class="kt">string</span>  <span class="c1">// Full URL of the source page
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">SourcePost</span>   <span class="o">*</span><span class="nx">Post</span>   <span class="c1">// Source post object (if internal)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">TargetPost</span>   <span class="o">*</span><span class="nx">Post</span>   <span class="c1">// Target post object (if internal)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">RawTarget</span>    <span class="kt">string</span>  <span class="c1">// Original href value
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">TargetURL</span>    <span class="kt">string</span>  <span class="c1">// Resolved full URL
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">TargetDomain</span> <span class="kt">string</span>  <span class="c1">// Domain of target URL
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">IsInternal</span>   <span class="kt">bool</span>    <span class="c1">// True if same domain
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">IsSelf</span>       <span class="kt">bool</span>    <span class="c1">// True if self-link
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">SourceText</span>   <span class="kt">string</span>  <span class="c1">// Link text from source
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">TargetText</span>   <span class="kt">string</span>  <span class="c1">// Title of target post (if internal)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre><p><strong>Template usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">{% if post.Inlinks %}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">aside</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;backlinks&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Pages that link here<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% for link in post.Inlinks %}
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ link.SourcePost.Href }}&#34;</span><span class="p">&gt;</span>{{ link.SourcePost.Title }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% endfor %}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">aside</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{% endif %}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">{% if post.Outlinks %}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">aside</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;outlinks&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Links from this page<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% for link in post.Outlinks %}
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ link.TargetURL }}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                {% if link.IsInternal %}{{ link.TargetText }}{% else %}{{ link.TargetDomain }}{% endif %}
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            {% if not link.IsInternal %}<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;external&#34;</span><span class="p">&gt;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>{% endif %}
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% endfor %}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">aside</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{% endif %}
</span></span></code></pre><hr>
<h3 id="chartjs">chartjs <a href="#chartjs" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>chartjs</code><br>
<strong>Stage:</strong> Render (after render_markdown)<br>
<strong>Purpose:</strong> Converts <code>chartjs</code> code blocks into interactive Chart.js charts.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">chartjs</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">cdn_url</span> <span class="p">=</span> <span class="s2">&#34;https://cdn.jsdelivr.net/npm/chart.js&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">container_class</span> <span class="p">=</span> <span class="s2">&#34;chartjs-container&#34;</span>
</span></span></code></pre><p><strong>Options:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable/disable the plugin</td>
</tr>
<tr>
<td><code>cdn_url</code></td>
<td><code>https://cdn.jsdelivr.net/npm/chart.js</code></td>
<td>Chart.js CDN URL</td>
</tr>
<tr>
<td><code>container_class</code></td>
<td><code>chartjs-container</code></td>
<td>CSS class for wrapper div</td>
</tr>
</tbody>
</table>
<p><strong>Markdown syntax:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="s">```chartjs
</span></span></span><span class="line"><span class="cl"><span class="s"></span>{
</span></span><span class="line"><span class="cl">  &#34;type&#34;: &#34;bar&#34;,
</span></span><span class="line"><span class="cl">  &#34;data&#34;: {
</span></span><span class="line"><span class="cl">    &#34;labels&#34;: [&#34;Red&#34;, &#34;Blue&#34;, &#34;Yellow&#34;],
</span></span><span class="line"><span class="cl">    &#34;datasets&#34;: [{
</span></span><span class="line"><span class="cl">      &#34;label&#34;: &#34;My Dataset&#34;,
</span></span><span class="line"><span class="cl">      &#34;data&#34;: [12, 19, 3],
</span></span><span class="line"><span class="cl">      &#34;backgroundColor&#34;: [&#34;#ff6384&#34;, &#34;#36a2eb&#34;, &#34;#ffce56&#34;]
</span></span><span class="line"><span class="cl">    }]
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl"><span class="s">```</span>
</span></span></code></pre><p><strong>HTML output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;chartjs-container&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">canvas</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;chart-abc123&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">canvas</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;chart-abc123&#39;</span><span class="p">).</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="nx">Chart</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="p">{</span><span class="s2">&#34;type&#34;</span><span class="o">:</span><span class="s2">&#34;bar&#34;</span><span class="p">,</span><span class="s2">&#34;data&#34;</span><span class="o">:</span><span class="p">{...}});</span>
</span></span><span class="line"><span class="cl">    <span class="p">})();</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>Supported chart types:</strong></p>
<ul>
<li><code>bar</code>, <code>line</code>, <code>pie</code>, <code>doughnut</code>, <code>radar</code>, <code>polarArea</code>, <code>bubble</code>, <code>scatter</code></li>
</ul>
<p><strong>Template requirements:</strong>
Include Chart.js in your base template:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://cdn.jsdelivr.net/npm/chart.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre><hr>
<h3 id="one-line-link">one_line_link <a href="#one-line-link" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>one_line_link</code><br>
<strong>Stage:</strong> Render (after render_markdown)<br>
<strong>Purpose:</strong> Expands standalone URLs in paragraphs into styled link preview cards.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">one_line_link</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">card_class</span> <span class="p">=</span> <span class="s2">&#34;link-card&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">fallback_title</span> <span class="p">=</span> <span class="s2">&#34;Link&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">timeout</span> <span class="p">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="nx">exclude_patterns</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;^https://twitter\\.com&#34;</span><span class="p">,</span> <span class="s2">&#34;^https://x\\.com&#34;</span><span class="p">]</span>
</span></span></code></pre><p><strong>Options:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable/disable the plugin</td>
</tr>
<tr>
<td><code>card_class</code></td>
<td><code>link-card</code></td>
<td>CSS class for the link card</td>
</tr>
<tr>
<td><code>fallback_title</code></td>
<td><code>Link</code></td>
<td>Title when metadata unavailable</td>
</tr>
<tr>
<td><code>timeout</code></td>
<td><code>5</code></td>
<td>HTTP timeout in seconds</td>
</tr>
<tr>
<td><code>exclude_patterns</code></td>
<td><code>[]</code></td>
<td>Regex patterns for URLs to skip</td>
</tr>
</tbody>
</table>
<p><strong>Behavior:</strong></p>
<ol>
<li>Finds paragraphs containing only a URL (<code>&lt;p&gt;https://...&lt;/p&gt;</code>)</li>
<li>Extracts the domain from the URL</li>
<li>Converts to a styled link card</li>
</ol>
<p><strong>Before:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>https://example.com/article<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>After:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://example.com/article&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;link-card&#34;</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;noopener noreferrer&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;link-card-content&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;link-card-title&#34;</span><span class="p">&gt;</span>Link<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;link-card-url&#34;</span><span class="p">&gt;</span>example.com<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>CSS example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">link-card</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">padding</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="n">border</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">transition</span><span class="p">:</span> <span class="k">box-shadow</span> <span class="mf">0.2</span><span class="kt">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">link-card</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="kt">px</span> <span class="mi">8</span><span class="kt">px</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">link-card-title</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="kc">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">link-card-url</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">font-size</span><span class="p">:</span> <span class="mf">0.875</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="kc">text</span><span class="o">-</span><span class="n">muted</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><hr>
<h3 id="wikilink-hover">wikilink_hover <a href="#wikilink-hover" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>wikilink_hover</code><br>
<strong>Stage:</strong> Render (after wikilinks)<br>
<strong>Purpose:</strong> Adds hover preview data attributes to wikilinks for tooltip/popup previews.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">wikilink_hover</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">preview_length</span> <span class="p">=</span> <span class="mi">200</span>
</span></span><span class="line"><span class="cl"><span class="nx">include_image</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">screenshot_service</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>  <span class="c"># Optional: &#34;https://screenshot.example.com/capture?url=&#34;</span>
</span></span></code></pre><p><strong>Options:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable/disable the plugin</td>
</tr>
<tr>
<td><code>preview_length</code></td>
<td><code>200</code></td>
<td>Max characters for preview text</td>
</tr>
<tr>
<td><code>include_image</code></td>
<td><code>true</code></td>
<td>Add preview image if available</td>
</tr>
<tr>
<td><code>screenshot_service</code></td>
<td><code>&quot;&quot;</code></td>
<td>URL prefix for screenshot service</td>
</tr>
</tbody>
</table>
<p><strong>Behavior:</strong></p>
<ol>
<li>Finds <code>&lt;a class=&quot;wikilink&quot;&gt;</code> tags created by the wikilinks plugin</li>
<li>Looks up the target post by href</li>
<li>Adds data attributes for hover previews</li>
</ol>
<p><strong>Data attributes added:</strong></p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data-preview</code></td>
<td>Truncated description or content</td>
</tr>
<tr>
<td><code>data-preview-image</code></td>
<td>Featured image URL (if available)</td>
</tr>
<tr>
<td><code>data-preview-screenshot</code></td>
<td>Screenshot service URL (if configured)</td>
</tr>
</tbody>
</table>
<p><strong>Before:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/my-post/&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;wikilink&#34;</span><span class="p">&gt;</span>My Post<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>After:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/my-post/&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;wikilink&#34;</span> 
</span></span><span class="line"><span class="cl">   <span class="na">data-preview</span><span class="o">=</span><span class="s">&#34;This is a description of the post...&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="na">data-preview-image</span><span class="o">=</span><span class="s">&#34;/images/featured.jpg&#34;</span><span class="p">&gt;</span>My Post<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>JavaScript for hover previews:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.wikilink[data-preview]&#39;</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">link</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">link</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">preview</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">preview</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">previewImage</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Show tooltip with preview content and optional image
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre><p><strong>Image field lookup order:</strong>
The plugin checks these Extra fields for images:</p>
<ol>
<li><code>image</code></li>
<li><code>featured_image</code></li>
<li><code>cover_image</code></li>
<li><code>og_image</code></li>
<li><code>thumbnail</code></li>
</ol>
<hr>
<h2 id="collect-stage">Collect Stage <a href="#collect-stage" class="heading-anchor">#</a></h2>
<h3 id="feeds">feeds <a href="#feeds" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>feeds</code><br>
<strong>Stage:</strong> Collect<br>
<strong>Purpose:</strong> Processes configured feed definitions, filtering, sorting, and paginating posts.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">feeds</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="nx">slug</span> <span class="p">=</span> <span class="s2">&#34;blog&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;Blog Posts&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">description</span> <span class="p">=</span> <span class="s2">&#34;All blog posts&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;published == true and not draft&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">sort</span> <span class="p">=</span> <span class="s2">&#34;date&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">reverse</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">items_per_page</span> <span class="p">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">feeds</span><span class="p">.</span><span class="nx">formats</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">html</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">rss</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">atom</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl"><span class="nx">json</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">feeds</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl"><span class="nx">slug</span> <span class="p">=</span> <span class="s2">&#34;tutorials&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;Tutorials&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;tags contains &#39;tutorial&#39;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">sort</span> <span class="p">=</span> <span class="s2">&#34;date&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">reverse</span> <span class="p">=</span> <span class="kc">true</span>
</span></span></code></pre><p><strong>Feed configuration options:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>slug</code></td>
<td>string</td>
<td>required</td>
<td>URL path for the feed</td>
</tr>
<tr>
<td><code>title</code></td>
<td>string</td>
<td>&quot;&quot;</td>
<td>Feed title</td>
</tr>
<tr>
<td><code>description</code></td>
<td>string</td>
<td>&quot;&quot;</td>
<td>Feed description</td>
</tr>
<tr>
<td><code>filter</code></td>
<td>string</td>
<td>&quot;&quot;</td>
<td>Filter expression</td>
</tr>
<tr>
<td><code>sort</code></td>
<td>string</td>
<td>&quot;date&quot;</td>
<td>Sort field</td>
</tr>
<tr>
<td><code>reverse</code></td>
<td>bool</td>
<td>true</td>
<td>Reverse sort order</td>
</tr>
<tr>
<td><code>items_per_page</code></td>
<td>int</td>
<td>10</td>
<td>Posts per page</td>
</tr>
<tr>
<td><code>formats</code></td>
<td>object</td>
<td>varies</td>
<td>Output formats</td>
</tr>
</tbody>
</table>
<p><strong>Filter expression syntax:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c"># Equality</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;published == true&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;category == &#39;news&#39;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Contains (for arrays)</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;tags contains &#39;go&#39;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Boolean combinations</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;published == true and not draft&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;tags contains &#39;go&#39; or tags contains &#39;python&#39;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Comparisons</span>
</span></span><span class="line"><span class="cl"><span class="nx">filter</span> <span class="p">=</span> <span class="s2">&#34;date &gt;= &#39;2024-01-01&#39;&#34;</span>
</span></span></code></pre><p>See <a href="/feeds-guide/" class="wikilink" data-title="Feeds Guide" data-description="Deep dive into markata-go&#39;s powerful feed system for creating filtered, sorted, paginated collections" data-date="2024-01-15">Feeds Guide</a> for complete filter syntax.</p>
<hr>
<h3 id="auto-feeds">auto_feeds <a href="#auto-feeds" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>auto_feeds</code><br>
<strong>Stage:</strong> Collect<br>
<strong>Purpose:</strong> Automatically generates feeds for tags, categories, and date archives.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">auto_feeds</span><span class="p">.</span><span class="nx">tags</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">slug_prefix</span> <span class="p">=</span> <span class="s2">&#34;tags&#34;</span>  <span class="c"># Results in /tags/python/, /tags/go/, etc.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">auto_feeds</span><span class="p">.</span><span class="nx">tags</span><span class="p">.</span><span class="nx">formats</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">html</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">rss</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">auto_feeds</span><span class="p">.</span><span class="nx">categories</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">slug_prefix</span> <span class="p">=</span> <span class="s2">&#34;categories&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">auto_feeds</span><span class="p">.</span><span class="nx">categories</span><span class="p">.</span><span class="nx">formats</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">html</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">rss</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">auto_feeds</span><span class="p">.</span><span class="nx">archives</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">slug_prefix</span> <span class="p">=</span> <span class="s2">&#34;archive&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">yearly_feeds</span> <span class="p">=</span> <span class="kc">true</span>   <span class="c"># /archive/2024/</span>
</span></span><span class="line"><span class="cl"><span class="nx">monthly_feeds</span> <span class="p">=</span> <span class="kc">false</span> <span class="c"># /archive/2024/01/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">auto_feeds</span><span class="p">.</span><span class="nx">archives</span><span class="p">.</span><span class="nx">formats</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">html</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">rss</span> <span class="p">=</span> <span class="kc">false</span>
</span></span></code></pre><p><strong>Generated feeds:</strong></p>
<p>For tags:</p>
<ul>
<li><code>/tags/python/</code> - Posts tagged &quot;python&quot;</li>
<li><code>/tags/go/</code> - Posts tagged &quot;go&quot;</li>
</ul>
<p>For categories (uses <code>category</code> field from post Extra):</p>
<ul>
<li><code>/categories/tutorials/</code> - Posts in tutorials category</li>
</ul>
<p>For archives:</p>
<ul>
<li><code>/archive/2024/</code> - All posts from 2024</li>
<li><code>/archive/2024/01/</code> - All posts from January 2024 (if monthly enabled)</li>
</ul>
<hr>
<h3 id="prevnext">prevnext <a href="#prevnext" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>prevnext</code><br>
<strong>Stage:</strong> Collect<br>
<strong>Purpose:</strong> Calculates previous/next post links for navigation based on feed ordering.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">prevnext</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>           <span class="c"># Enable/disable the plugin (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">strategy</span> <span class="p">=</span> <span class="s2">&#34;first_feed&#34;</span>  <span class="c"># Strategy for determining navigation context</span>
</span></span><span class="line"><span class="cl"><span class="nx">default_feed</span> <span class="p">=</span> <span class="s2">&#34;blog&#34;</span>    <span class="c"># Default feed slug (for &#34;explicit_feed&#34; strategy)</span>
</span></span></code></pre><p><strong>Strategy options:</strong></p>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>first_feed</code></td>
<td>Use the first feed that contains the post (default)</td>
</tr>
<tr>
<td><code>explicit_feed</code></td>
<td>Always use the feed specified in <code>default_feed</code></td>
</tr>
<tr>
<td><code>series</code></td>
<td>Use <code>series</code> frontmatter field, fall back to <code>first_feed</code></td>
</tr>
<tr>
<td><code>frontmatter</code></td>
<td>Use <code>prevnext_feed</code> frontmatter field, fall back to <code>first_feed</code></td>
</tr>
</tbody>
</table>
<p><strong>Behavior:</strong></p>
<ol>
<li>Runs after the <code>feeds</code> plugin to access feed data</li>
<li>For each post, determines which feed to use based on strategy</li>
<li>Finds the post's position within that feed</li>
<li>Sets <code>Prev</code> and <code>Next</code> post references</li>
<li>Sets <code>PrevNextContext</code> with additional navigation metadata</li>
</ol>
<p><strong>Post fields set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>prev</code></td>
<td>*Post</td>
<td>Previous post in sequence (nil if first)</td>
</tr>
<tr>
<td><code>next</code></td>
<td>*Post</td>
<td>Next post in sequence (nil if last)</td>
</tr>
<tr>
<td><code>prev_next_feed</code></td>
<td>string</td>
<td>Feed slug used for navigation</td>
</tr>
<tr>
<td><code>prev_next_context</code></td>
<td>*PrevNextContext</td>
<td>Full navigation context</td>
</tr>
</tbody>
</table>
<p><strong>PrevNextContext structure:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">PrevNextContext</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">FeedSlug</span>  <span class="kt">string</span> <span class="c1">// Slug of the feed used
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">FeedTitle</span> <span class="kt">string</span> <span class="c1">// Title of the feed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Position</span>  <span class="kt">int</span>    <span class="c1">// 1-indexed position in feed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Total</span>     <span class="kt">int</span>    <span class="c1">// Total posts in feed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Prev</span>      <span class="o">*</span><span class="nx">Post</span>  <span class="c1">// Previous post
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">Next</span>      <span class="o">*</span><span class="nx">Post</span>  <span class="c1">// Next post
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre><p><strong>Template usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">{% if post.Prev or post.Next %}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-navigation&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% if post.Prev %}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ post.Prev.Href }}&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav-prev&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav-label&#34;</span><span class="p">&gt;</span>Previous<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav-title&#34;</span><span class="p">&gt;</span>{{ post.Prev.Title }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% endif %}
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    {% if post.Next %}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ post.Next.Href }}&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav-next&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav-label&#34;</span><span class="p">&gt;</span>Next<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;nav-title&#34;</span><span class="p">&gt;</span>{{ post.Next.Title }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% endif %}
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{% endif %}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- With context --&gt;</span>
</span></span><span class="line"><span class="cl">{% if post.PrevNextContext %}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;series-progress&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    Post {{ post.PrevNextContext.Position }} of {{ post.PrevNextContext.Total }}
</span></span><span class="line"><span class="cl">    in {{ post.PrevNextContext.FeedTitle }}
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{% endif %}
</span></span></code></pre><p><strong>Using series for tutorials:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Part 2: Advanced Topics&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">series</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;go-tutorial&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w">
</span></span></span></code></pre><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">prevnext</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">strategy</span> <span class="p">=</span> <span class="s2">&#34;series&#34;</span>
</span></span></code></pre><hr>
<h2 id="write-stage">Write Stage <a href="#write-stage" class="heading-anchor">#</a></h2>
<h3 id="publish-html">publish_html <a href="#publish-html" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>publish_html</code><br>
<strong>Stage:</strong> Write<br>
<strong>Purpose:</strong> Writes individual post HTML files to the output directory.</p>
<p><strong>Configuration:</strong> Uses <code>output_dir</code> from main config.</p>
<p><strong>Behavior:</strong></p>
<ol>
<li>Skips posts marked as skip, unpublished, or draft</li>
<li>Creates directory: <code>{output_dir}/{slug}/</code></li>
<li>Writes <code>index.html</code> with post's HTML content</li>
<li>Uses <code>post.HTML</code> if available, otherwise wraps <code>ArticleHTML</code> in basic template</li>
</ol>
<p><strong>Output structure:</strong></p>
<pre><code>output/
  getting-started/
    index.html
  advanced-topics/
    index.html
  my-first-post/
    index.html
</code></pre>
<hr>
<h3 id="publish-feeds">publish_feeds <a href="#publish-feeds" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>publish_feeds</code><br>
<strong>Stage:</strong> Write<br>
<strong>Purpose:</strong> Writes feed output files in all configured formats (HTML, RSS, Atom, JSON, Markdown, Text).</p>
<p><strong>Behavior:</strong>
For each feed, generates enabled formats:</p>
<table>
<thead>
<tr>
<th>Format</th>
<th>File</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTML</td>
<td><code>index.html</code>, <code>page/2/index.html</code></td>
<td>Paginated HTML pages</td>
</tr>
<tr>
<td>RSS</td>
<td><code>rss.xml</code></td>
<td>RSS 2.0 feed</td>
</tr>
<tr>
<td>Atom</td>
<td><code>atom.xml</code></td>
<td>Atom 1.0 feed</td>
</tr>
<tr>
<td>JSON</td>
<td><code>feed.json</code></td>
<td>JSON Feed 1.1</td>
</tr>
<tr>
<td>Markdown</td>
<td><code>index.md</code></td>
<td>Markdown listing</td>
</tr>
<tr>
<td>Text</td>
<td><code>index.txt</code></td>
<td>Plain text listing</td>
</tr>
</tbody>
</table>
<p><strong>Output structure:</strong></p>
<pre><code>output/
  blog/
    index.html      # Page 1
    page/
      2/
        index.html  # Page 2
      3/
        index.html  # Page 3
    rss.xml
    atom.xml
    feed.json
  tags/
    python/
      index.html
      rss.xml
</code></pre>
<hr>
<h3 id="sitemap">sitemap <a href="#sitemap" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>sitemap</code><br>
<strong>Stage:</strong> Write<br>
<strong>Purpose:</strong> Generates a sitemap.xml file listing all published posts and feed pages.</p>
<p><strong>Configuration:</strong> None (uses <code>url</code> from main config for absolute URLs)</p>
<p><strong>Behavior:</strong></p>
<ol>
<li>Adds home page with highest priority</li>
<li>Adds all published posts with their dates</li>
<li>Adds feed index pages</li>
<li>Writes to <code>{output_dir}/sitemap.xml</code></li>
</ol>
<p><strong>Output example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;urlset</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.sitemaps.org/schemas/sitemap/0.9&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;url&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;loc&gt;</span>https://example.com/<span class="nt">&lt;/loc&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;lastmod&gt;</span>2024-01-15<span class="nt">&lt;/lastmod&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;changefreq&gt;</span>daily<span class="nt">&lt;/changefreq&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;priority&gt;</span>1.0<span class="nt">&lt;/priority&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/url&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;url&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;loc&gt;</span>https://example.com/my-post/<span class="nt">&lt;/loc&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;lastmod&gt;</span>2024-01-15<span class="nt">&lt;/lastmod&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;changefreq&gt;</span>weekly<span class="nt">&lt;/changefreq&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;priority&gt;</span>0.8<span class="nt">&lt;/priority&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/url&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/urlset&gt;</span>
</span></span></code></pre><hr>
<h3 id="rss">rss <a href="#rss" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>rss</code><br>
<strong>Stage:</strong> Write (utility)<br>
<strong>Purpose:</strong> Generates RSS 2.0 feeds. Used by <code>publish_feeds</code>.</p>
<p><strong>Output format:</strong> RSS 2.0 with Atom namespace for self-reference.</p>
<p><strong>Example output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;rss</span> <span class="na">version=</span><span class="s">&#34;2.0&#34;</span> <span class="na">xmlns:atom=</span><span class="s">&#34;http://www.w3.org/2005/Atom&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;channel&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;title&gt;</span>My Blog<span class="nt">&lt;/title&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;link&gt;</span>https://example.com<span class="nt">&lt;/link&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;description&gt;</span>A blog about things<span class="nt">&lt;/description&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;language&gt;</span>en-us<span class="nt">&lt;/language&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;lastBuildDate&gt;</span>Mon, 15 Jan 2024 10:00:00 +0000<span class="nt">&lt;/lastBuildDate&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;atom:link</span> <span class="na">href=</span><span class="s">&#34;https://example.com/blog/rss.xml&#34;</span> <span class="na">rel=</span><span class="s">&#34;self&#34;</span> <span class="na">type=</span><span class="s">&#34;application/rss+xml&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;item&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;title&gt;</span>My First Post<span class="nt">&lt;/title&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;link&gt;</span>https://example.com/my-first-post/<span class="nt">&lt;/link&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;description&gt;</span>Post description or excerpt...<span class="nt">&lt;/description&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;pubDate&gt;</span>Mon, 15 Jan 2024 10:00:00 +0000<span class="nt">&lt;/pubDate&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;guid</span> <span class="na">isPermaLink=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>https://example.com/my-first-post/<span class="nt">&lt;/guid&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/item&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/channel&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/rss&gt;</span>
</span></span></code></pre><hr>
<h3 id="atom">atom <a href="#atom" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>atom</code><br>
<strong>Stage:</strong> Write (utility)<br>
<strong>Purpose:</strong> Generates Atom 1.0 feeds. Used by <code>publish_feeds</code>.</p>
<p><strong>Output format:</strong> Atom 1.0</p>
<p><strong>Example output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;feed</span> <span class="na">xmlns=</span><span class="s">&#34;http://www.w3.org/2005/Atom&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;title&gt;</span>My Blog<span class="nt">&lt;/title&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;id&gt;</span>https://example.com/blog/atom.xml<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;updated&gt;</span>2024-01-15T10:00:00Z<span class="nt">&lt;/updated&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&#34;https://example.com&#34;</span> <span class="na">rel=</span><span class="s">&#34;alternate&#34;</span> <span class="na">type=</span><span class="s">&#34;text/html&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&#34;https://example.com/blog/atom.xml&#34;</span> <span class="na">rel=</span><span class="s">&#34;self&#34;</span> <span class="na">type=</span><span class="s">&#34;application/atom+xml&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;author&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;name&gt;</span>Author Name<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/author&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;entry&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;title&gt;</span>My First Post<span class="nt">&lt;/title&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;id&gt;</span>https://example.com/my-first-post/<span class="nt">&lt;/id&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;updated&gt;</span>2024-01-15T10:00:00Z<span class="nt">&lt;/updated&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;published&gt;</span>2024-01-15T10:00:00Z<span class="nt">&lt;/published&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&#34;https://example.com/my-first-post/&#34;</span> <span class="na">rel=</span><span class="s">&#34;alternate&#34;</span> <span class="na">type=</span><span class="s">&#34;text/html&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;summary</span> <span class="na">type=</span><span class="s">&#34;text&#34;</span><span class="nt">&gt;</span>Post description<span class="nt">&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;content</span> <span class="na">type=</span><span class="s">&#34;html&#34;</span><span class="nt">&gt;</span>Full HTML content...<span class="nt">&lt;/content&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/entry&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/feed&gt;</span>
</span></span></code></pre><hr>
<h3 id="jsonfeed">jsonfeed <a href="#jsonfeed" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>jsonfeed</code><br>
<strong>Stage:</strong> Write (utility)<br>
<strong>Purpose:</strong> Generates JSON Feed 1.1 documents. Used by <code>publish_feeds</code>.</p>
<p><strong>Output format:</strong> <a href="https://jsonfeed.org/version/1.1">JSON Feed 1.1</a></p>
<p><strong>Example output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;https://jsonfeed.org/version/1.1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;My Blog&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;home_page_url&#34;</span><span class="p">:</span> <span class="s2">&#34;https://example.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;feed_url&#34;</span><span class="p">:</span> <span class="s2">&#34;https://example.com/blog/feed.json&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;A blog about things&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;language&#34;</span><span class="p">:</span> <span class="s2">&#34;en&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;authors&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Author Name&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;items&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="s2">&#34;https://example.com/my-first-post/&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;url&#34;</span><span class="p">:</span> <span class="s2">&#34;https://example.com/my-first-post/&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;title&#34;</span><span class="p">:</span> <span class="s2">&#34;My First Post&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;content_html&#34;</span><span class="p">:</span> <span class="s2">&#34;&lt;p&gt;Full HTML content...&lt;/p&gt;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;content_text&#34;</span><span class="p">:</span> <span class="s2">&#34;Plain text content...&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;summary&#34;</span><span class="p">:</span> <span class="s2">&#34;Post description&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;date_published&#34;</span><span class="p">:</span> <span class="s2">&#34;2024-01-15T10:00:00Z&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&#34;tags&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;go&#34;</span><span class="p">,</span> <span class="s2">&#34;programming&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><hr>
<h3 id="static-assets">static_assets <a href="#static-assets" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>static_assets</code><br>
<strong>Stage:</strong> Write<br>
<strong>Purpose:</strong> Copies static assets from theme and project directories to output.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">theme</span> <span class="p">=</span> <span class="s2">&#34;default&#34;</span>  <span class="c"># Theme name for theme static files</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Copies theme static files from <code>themes/{theme}/static/</code></li>
<li>Copies project static files from <code>static/</code></li>
<li>Project files override theme files (local customization)</li>
</ol>
<p><strong>Directory structure:</strong></p>
<pre><code>mysite/
  themes/
    default/
      static/
        css/
          theme.css
        js/
          theme.js
  static/
    css/
      custom.css    # Overrides or adds to theme
    images/
      logo.png
  output/
    css/
      theme.css     # From theme
      custom.css    # From project
    js/
      theme.js      # From theme
    images/
      logo.png      # From project
</code></pre>
<hr>
<h3 id="palette-css">palette_css <a href="#palette-css" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>palette_css</code><br>
<strong>Stage:</strong> Write (after static_assets)<br>
<strong>Purpose:</strong> Generates CSS custom properties from the configured color palette, enabling theme customization without modifying CSS files directly.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">theme</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">palette</span> <span class="p">=</span> <span class="s2">&#34;nord&#34;</span>  <span class="c"># Palette name (built-in or custom)</span>
</span></span></code></pre><p><strong>Built-in palettes:</strong></p>
<ul>
<li><code>catppuccin-latte</code> - Light pastel theme</li>
<li><code>catppuccin-mocha</code> - Dark pastel theme</li>
<li><code>dracula</code> - Dark purple/pink theme</li>
<li><code>gruvbox-dark</code> - Dark retro groove theme</li>
<li><code>gruvbox-light</code> - Light retro groove theme</li>
<li><code>nord</code> - Arctic, north-bluish color palette</li>
<li><code>one-dark</code> - Atom One Dark inspired</li>
<li><code>rose-pine</code> - All-natural pine, faux fur, and soho vibes</li>
<li><code>solarized-dark</code> - Precision dark theme</li>
<li><code>solarized-light</code> - Precision light theme</li>
<li><code>tokyo-night</code> - Dark theme inspired by Tokyo night lights</li>
</ul>
<p><strong>Behavior:</strong></p>
<ol>
<li>Reads palette name from <code>config.Extra[&quot;theme&quot;][&quot;palette&quot;]</code></li>
<li>Loads the palette definition (built-in or from <code>palettes/</code> directory)</li>
<li>Maps palette semantic colors to theme CSS variable names</li>
<li>Generates <code>css/variables.css</code> with CSS custom properties</li>
<li>Includes default font families, spacing, and layout values</li>
</ol>
<p><strong>Generated CSS structure:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c">/* CSS Custom Properties - Nord Theme */</span>
</span></span><span class="line"><span class="cl"><span class="p">:</span><span class="nd">root</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-primary</span><span class="p">:</span> <span class="mh">#88c0d0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-primary-light</span><span class="p">:</span> <span class="mh">#8fbcbb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-primary-dark</span><span class="p">:</span> <span class="mh">#8fbcbb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">/* Semantic colors */</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-text</span><span class="p">:</span> <span class="mh">#eceff4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-text-muted</span><span class="p">:</span> <span class="mh">#d8dee9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-background</span><span class="p">:</span> <span class="mh">#2e3440</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-surface</span><span class="p">:</span> <span class="mh">#3b4252</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-border</span><span class="p">:</span> <span class="mh">#4c566a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">/* Status colors */</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-success</span><span class="p">:</span> <span class="mh">#a3be8c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-warning</span><span class="p">:</span> <span class="mh">#ebcb8b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-error</span><span class="p">:</span> <span class="mh">#bf616a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--color-info</span><span class="p">:</span> <span class="mh">#81a1c1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">/* Font families */</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--font-body</span><span class="p">:</span> <span class="n">system-ui</span><span class="p">,</span> <span class="o">-</span><span class="n">apple-system</span><span class="p">,</span> <span class="o">...</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--font-heading</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">font</span><span class="o">-</span><span class="n">body</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nv">--font-mono</span><span class="p">:</span> <span class="n">ui-monospace</span><span class="p">,</span> <span class="o">...</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c">/* Font sizes, spacing, layout... */</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p><strong>Custom palettes:</strong>
Create a TOML file in the <code>palettes/</code> directory:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c"># palettes/my-palette.toml</span>
</span></span><span class="line"><span class="cl"><span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;My Custom Palette&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">type</span> <span class="p">=</span> <span class="s2">&#34;dark&#34;</span>  <span class="c"># or &#34;light&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">colors</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">accent</span> <span class="p">=</span> <span class="s2">&#34;#ff6b6b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">accent-hover</span> <span class="p">=</span> <span class="s2">&#34;#ee5a5a&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">text-primary</span> <span class="p">=</span> <span class="s2">&#34;#f8f8f2&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">text-muted</span> <span class="p">=</span> <span class="s2">&#34;#b0b0b0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">bg-primary</span> <span class="p">=</span> <span class="s2">&#34;#1a1a2e&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">bg-surface</span> <span class="p">=</span> <span class="s2">&#34;#16213e&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">border</span> <span class="p">=</span> <span class="s2">&#34;#2d3a5a&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">success</span> <span class="p">=</span> <span class="s2">&#34;#50fa7b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">warning</span> <span class="p">=</span> <span class="s2">&#34;#f1fa8c&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">error</span> <span class="p">=</span> <span class="s2">&#34;#ff5555&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">info</span> <span class="p">=</span> <span class="s2">&#34;#8be9fd&#34;</span>
</span></span></code></pre><p><strong>Template usage:</strong>
Variables are automatically available in your CSS:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">my-component</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="n">surface</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="kc">text</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="n">border</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">button-primary</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="n">primary</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="kc">color</span><span class="o">-</span><span class="n">background</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p><strong>Why use palettes?</strong></p>
<ul>
<li>Switch themes by changing one config value</li>
<li>Consistent colors across your entire site</li>
<li>Built-in palettes tested for accessibility</li>
<li>Easy to create and share custom themes</li>
</ul>
<hr>
<h3 id="redirects">redirects <a href="#redirects" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>redirects</code><br>
<strong>Stage:</strong> Write<br>
<strong>Purpose:</strong> Generates HTML redirect pages from a <code>_redirects</code> file for URL migration and link preservation.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">redirects</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">redirects_file</span> <span class="p">=</span> <span class="s2">&#34;static/_redirects&#34;</span>  <span class="c"># Path to redirects file (default)</span>
</span></span><span class="line"><span class="cl"><span class="nx">redirect_template</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>                 <span class="c"># Custom template path (optional)</span>
</span></span></code></pre><p><strong>Redirects file format (<code>static/_redirects</code>):</strong></p>
<pre><code># Comments start with #
# Format: /old-path /new-path

/old-post/          /new-post/
/blog/2020/hello/   /posts/hello-world/
/about-me/          /about/
</code></pre>
<p><strong>Behavior:</strong></p>
<ol>
<li>Reads the <code>_redirects</code> file (skips silently if not found)</li>
<li>Parses redirect rules (ignores comments, empty lines, wildcards)</li>
<li>For each rule, creates <code>{output_dir}/{old-path}/index.html</code></li>
<li>Uses HTML meta refresh and canonical link for SEO-friendly redirects</li>
<li>Caches results to avoid regeneration on unchanged content</li>
</ol>
<p><strong>Supported redirect syntax:</strong></p>
<ul>
<li>Simple redirects: <code>/old /new</code></li>
<li>Paths must start with <code>/</code></li>
<li>Wildcards (<code>*</code>) are ignored (not supported for static generation)</li>
<li>Status codes in the file are ignored (always uses meta refresh)</li>
</ul>
<p><strong>Generated HTML:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Refresh&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;0; url=&#39;/new-path/&#39;&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/new-path/&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;/old-path/ has been moved to /new-path/.&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>/old-path/ has been moved to /new-path/<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Page Moved<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">code</span><span class="p">&gt;</span>/old-path/<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;</span> has moved to <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/new-path/&#34;</span><span class="p">&gt;</span>/new-path/<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>Custom template:</strong>
Create a custom template with these available variables:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c">&lt;!-- templates/redirect.html --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Refresh&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;0; url=&#39;{{ .New }}&#39;&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .New }}&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Redirecting...<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Redirecting from {{ .Original }} to <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .New }}&#34;</span><span class="p">&gt;</span>{{ .New }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre><pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">redirects</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">redirect_template</span> <span class="p">=</span> <span class="s2">&#34;templates/redirect.html&#34;</span>
</span></span></code></pre><p><strong>Template variables:</strong></p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.Original</code></td>
<td>string</td>
<td>Source path (e.g., <code>/old-post/</code>)</td>
</tr>
<tr>
<td><code>.New</code></td>
<td>string</td>
<td>Destination path (e.g., <code>/new-post/</code>)</td>
</tr>
<tr>
<td><code>.Config</code></td>
<td>*Config</td>
<td>Site configuration object</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="qrcode">qrcode <a href="#qrcode" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>qrcode</code><br>
<strong>Stage:</strong> Write<br>
<strong>Purpose:</strong> Generates QR code images for each post's URL, useful for print materials or sharing.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">qrcode</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="nx">format</span> <span class="p">=</span> <span class="s2">&#34;svg&#34;</span>              <span class="c"># &#34;svg&#34; or &#34;png&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nx">size</span> <span class="p">=</span> <span class="mi">200</span>                  <span class="c"># Size in pixels</span>
</span></span><span class="line"><span class="cl"><span class="nx">output_dir</span> <span class="p">=</span> <span class="s2">&#34;qrcodes&#34;</span>      <span class="c"># Subdirectory in output</span>
</span></span><span class="line"><span class="cl"><span class="nx">error_correction</span> <span class="p">=</span> <span class="s2">&#34;M&#34;</span>      <span class="c"># L, M, Q, H</span>
</span></span><span class="line"><span class="cl"><span class="nx">foreground</span> <span class="p">=</span> <span class="s2">&#34;#000000&#34;</span>      <span class="c"># QR code color</span>
</span></span><span class="line"><span class="cl"><span class="nx">background</span> <span class="p">=</span> <span class="s2">&#34;#ffffff&#34;</span>      <span class="c"># Background color</span>
</span></span></code></pre><p><strong>Options:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable/disable QR code generation</td>
</tr>
<tr>
<td><code>format</code></td>
<td><code>svg</code></td>
<td>Output format: <code>svg</code> or <code>png</code></td>
</tr>
<tr>
<td><code>size</code></td>
<td><code>200</code></td>
<td>Image size in pixels</td>
</tr>
<tr>
<td><code>output_dir</code></td>
<td><code>qrcodes</code></td>
<td>Output subdirectory name</td>
</tr>
<tr>
<td><code>error_correction</code></td>
<td><code>M</code></td>
<td>Error correction level</td>
</tr>
<tr>
<td><code>foreground</code></td>
<td><code>#000000</code></td>
<td>QR code foreground color</td>
</tr>
<tr>
<td><code>background</code></td>
<td><code>#ffffff</code></td>
<td>QR code background color</td>
</tr>
</tbody>
</table>
<p><strong>Error correction levels:</strong></p>
<table>
<thead>
<tr>
<th>Level</th>
<th>Recovery</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>L</code></td>
<td>~7%</td>
<td>Clean environments</td>
</tr>
<tr>
<td><code>M</code></td>
<td>~15%</td>
<td>Standard use (default)</td>
</tr>
<tr>
<td><code>Q</code></td>
<td>~25%</td>
<td>Industrial/outdoor</td>
</tr>
<tr>
<td><code>H</code></td>
<td>~30%</td>
<td>Maximum durability</td>
</tr>
</tbody>
</table>
<p><strong>Behavior:</strong></p>
<ol>
<li>For each non-skipped post, builds the absolute URL</li>
<li>Generates QR code in the configured format</li>
<li>Saves to <code>{output_dir}/{qrcode_output_dir}/{slug}.{format}</code></li>
<li>Adds <code>qrcode_url</code> to post's Extra map</li>
</ol>
<p><strong>Output structure:</strong></p>
<pre><code>output/
  qrcodes/
    hello-world.svg
    my-first-post.svg
    another-article.svg
</code></pre>
<p><strong>Post field set:</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>qrcode_url</code></td>
<td>string</td>
<td>Relative URL to QR code image</td>
</tr>
</tbody>
</table>
<p><strong>Template usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">{% if post.qrcode_url %}
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;qr-code&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;{{ post.qrcode_url }}&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;QR Code for {{ post.Title }}&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Scan to visit this page<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">{% endif %}
</span></span></code></pre><p><strong>Print stylesheet example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">@</span><span class="k">media</span> <span class="nt">print</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nc">qr-code</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">page-break-inside</span><span class="p">:</span> <span class="kc">avoid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">margin-top</span><span class="p">:</span> <span class="mi">2</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nc">qr-code</span> <span class="nt">img</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">width</span><span class="p">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">height</span><span class="p">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">@</span><span class="k">media</span> <span class="nt">screen</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nc">qr-code</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span> <span class="c">/* Hide on screen, show in print */</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p><strong>Custom colors example:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">qrcode</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">foreground</span> <span class="p">=</span> <span class="s2">&#34;#2e3440&#34;</span>  <span class="c"># Nord dark</span>
</span></span><span class="line"><span class="cl"><span class="nx">background</span> <span class="p">=</span> <span class="s2">&#34;#eceff4&#34;</span>  <span class="c"># Nord light</span>
</span></span></code></pre><hr>
<h2 id="default-plugin-order">Default Plugin Order <a href="#default-plugin-order" class="heading-anchor">#</a></h2>
<p>When using <code>DefaultPlugins()</code>, plugins execute in this order:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[]</span><span class="nx">lifecycle</span><span class="p">.</span><span class="nx">Plugin</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Glob stage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewGlobPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Load stage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewLoadPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Transform stage (in order)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewDescriptionPlugin</span><span class="p">(),</span>  <span class="c1">// Auto-generate descriptions early
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewReadingTimePlugin</span><span class="p">(),</span>  <span class="c1">// Calculate reading time
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewWikilinksPlugin</span><span class="p">(),</span>    <span class="c1">// Process wikilinks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewTocPlugin</span><span class="p">(),</span>          <span class="c1">// Extract TOC
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewJinjaMdPlugin</span><span class="p">(),</span>      <span class="c1">// Process Jinja templates
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Render stage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewRenderMarkdownPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nf">NewHeadingAnchorsPlugin</span><span class="p">(),</span> <span class="c1">// Add anchor links to headings
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewLinkCollectorPlugin</span><span class="p">(),</span>  <span class="c1">// Track inlinks/outlinks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewTemplatesPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Collect stage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewFeedsPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nf">NewAutoFeedsPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nf">NewPrevNextPlugin</span><span class="p">(),</span>      <span class="c1">// Calculate prev/next navigation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Write stage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewStaticAssetsPlugin</span><span class="p">(),</span> <span class="c1">// Copy static assets first
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">NewPublishFeedsPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nf">NewPublishHTMLPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nf">NewSitemapPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nf">NewRedirectsPlugin</span><span class="p">(),</span>    <span class="c1">// Generate redirect pages
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre><hr>
<h2 id="optional-plugins">Optional Plugins <a href="#optional-plugins" class="heading-anchor">#</a></h2>
<p>The following plugins are not enabled by default and must be explicitly configured. They provide specialized functionality that may not be needed for all sites.</p>
<h3 id="mermaid">mermaid <a href="#mermaid" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>mermaid</code><br>
<strong>Stage:</strong> Render (post_render)<br>
<strong>Purpose:</strong> Converts Mermaid code blocks into rendered diagrams using Mermaid.js.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">mermaid</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>                                              <span class="c"># Enable the plugin (default: false)</span>
</span></span><span class="line"><span class="cl"><span class="nx">cdn_url</span> <span class="p">=</span> <span class="s2">&#34;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs&#34;</span>  <span class="c"># Mermaid CDN URL</span>
</span></span><span class="line"><span class="cl"><span class="nx">theme</span> <span class="p">=</span> <span class="s2">&#34;default&#34;</span>                                           <span class="c"># Mermaid theme (default, dark, forest, neutral)</span>
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Finds code blocks with <code>language-mermaid</code> class in <code>ArticleHTML</code></li>
<li>Converts them to <code>&lt;pre class=&quot;mermaid&quot;&gt;</code> blocks that Mermaid.js can render</li>
<li>Automatically injects the Mermaid.js initialization script</li>
<li>Only injects the script once per post (even with multiple diagrams)</li>
</ol>
<p><strong>Markdown usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="s">```mermaid
</span></span></span><span class="line"><span class="cl"><span class="s"></span>graph TD
</span></span><span class="line"><span class="cl">    A[Start] --&gt; B{Is it working?}
</span></span><span class="line"><span class="cl">    B --&gt;|Yes| C[Great!]
</span></span><span class="line"><span class="cl">    B --&gt;|No| D[Debug]
</span></span><span class="line"><span class="cl">    D --&gt; B
</span></span><span class="line"><span class="cl"><span class="s">```</span>
</span></span></code></pre><p><strong>Supported diagram types:</strong></p>
<ul>
<li>Flowcharts (<code>graph TD</code>, <code>graph LR</code>)</li>
<li>Sequence diagrams</li>
<li>Class diagrams</li>
<li>State diagrams</li>
<li>Entity Relationship diagrams</li>
<li>Gantt charts</li>
<li>Pie charts</li>
<li>Git graphs</li>
<li>And more (see <a href="https://mermaid.js.org/">Mermaid docs</a>)</li>
</ul>
<p><strong>HTML output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">pre</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;mermaid&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">graph TD
</span></span><span class="line"><span class="cl">    A[Start] --&gt; B{Is it working?}
</span></span><span class="line"><span class="cl">    B --&gt;|Yes| C[Great!]
</span></span><span class="line"><span class="cl">    B --&gt;|No| D[Debug]
</span></span><span class="line"><span class="cl">    D --&gt; B
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;module&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">import</span> <span class="nx">mermaid</span> <span class="nx">from</span> <span class="s1">&#39;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mermaid</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span> <span class="nx">startOnLoad</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">theme</span><span class="o">:</span> <span class="s1">&#39;default&#39;</span> <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>Enabling the plugin:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">plugins</span> <span class="o">:=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">plugins</span><span class="p">.</span><span class="nf">DefaultPlugins</span><span class="p">(),</span> <span class="nx">plugins</span><span class="p">.</span><span class="nf">NewMermaidPlugin</span><span class="p">())</span>
</span></span></code></pre><p>Or by name:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">pluginList</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">plugins</span><span class="p">.</span><span class="nf">PluginsByNames</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... default plugins ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s">&#34;mermaid&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre><hr>
<h3 id="glossary">glossary <a href="#glossary" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>glossary</code><br>
<strong>Stage:</strong> Render (post_render) + Write<br>
<strong>Purpose:</strong> Automatically links glossary terms in post content and exports a glossary JSON file.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">glossary</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>              <span class="c"># Enable the plugin (default: true when configured)</span>
</span></span><span class="line"><span class="cl"><span class="nx">link_class</span> <span class="p">=</span> <span class="s2">&#34;glossary-term&#34;</span>  <span class="c"># CSS class for glossary links (default)</span>
</span></span><span class="line"><span class="cl"><span class="nx">case_sensitive</span> <span class="p">=</span> <span class="kc">false</span>      <span class="c"># Case-sensitive term matching (default: false)</span>
</span></span><span class="line"><span class="cl"><span class="nx">tooltip</span> <span class="p">=</span> <span class="kc">true</span>              <span class="c"># Add title attribute with description (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">max_links_per_term</span> <span class="p">=</span> <span class="mi">1</span>      <span class="c"># Max times to link each term (0 = all, default: 1)</span>
</span></span><span class="line"><span class="cl"><span class="nx">exclude_tags</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;glossary&#34;</span><span class="p">]</span> <span class="c"># Tags to exclude from linking (default: [&#34;glossary&#34;])</span>
</span></span><span class="line"><span class="cl"><span class="nx">export_json</span> <span class="p">=</span> <span class="kc">true</span>          <span class="c"># Export glossary.json file (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">glossary_path</span> <span class="p">=</span> <span class="s2">&#34;glossary&#34;</span>  <span class="c"># Path prefix for glossary posts (default)</span>
</span></span><span class="line"><span class="cl"><span class="nx">template_key</span> <span class="p">=</span> <span class="s2">&#34;glossary&#34;</span>   <span class="c"># Frontmatter key to identify glossary posts (default)</span>
</span></span></code></pre><p><strong>Glossary post format:</strong>
Create posts in the <code>glossary/</code> directory (or set <code>glossary_path</code>):</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;API&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Application Programming Interface - a set of protocols for building software&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">templateKey</span><span class="p">:</span><span class="w"> </span><span class="l">glossary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">aliases</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;APIs&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;Application Programming Interface&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">An **API** (Application Programming Interface) is a set of protocols, </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">routines, and tools for building software applications...</span><span class="w">
</span></span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Scans posts to identify glossary definitions (by path or <code>templateKey</code>)</li>
<li>Builds a lookup table of terms and aliases</li>
<li>In non-glossary posts, finds term occurrences and wraps them in links</li>
<li>Protects content inside <code>&lt;a&gt;</code>, <code>&lt;code&gt;</code>, and <code>&lt;pre&gt;</code> tags from linking</li>
<li>Respects <code>max_links_per_term</code> to avoid over-linking</li>
<li>Exports <code>glossary.json</code> to the output directory</li>
</ol>
<p><strong>HTML output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c">&lt;!-- Before --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>You can use the API to fetch data.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- After --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>You can use the <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;/glossary/api/&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;glossary-term&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;Application Programming Interface - a set of protocols for building software&#34;</span><span class="p">&gt;</span>API<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> to fetch data.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>Exported glossary.json:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;terms&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;term&#34;</span><span class="p">:</span> <span class="s2">&#34;API&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;slug&#34;</span><span class="p">:</span> <span class="s2">&#34;api&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;description&#34;</span><span class="p">:</span> <span class="s2">&#34;Application Programming Interface - a set of protocols for building software&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;aliases&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;APIs&#34;</span><span class="p">,</span> <span class="s2">&#34;Application Programming Interface&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;href&#34;</span><span class="p">:</span> <span class="s2">&#34;/glossary/api/&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p><strong>CSS styling:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">glossary-term</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">underline</span> <span class="kc">dotted</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">text-underline-offset</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">cursor</span><span class="p">:</span> <span class="kc">help</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">glossary-term</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">underline</span> <span class="kc">solid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p><strong>Enabling the plugin:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">plugins</span> <span class="o">:=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">plugins</span><span class="p">.</span><span class="nf">DefaultPlugins</span><span class="p">(),</span> <span class="nx">plugins</span><span class="p">.</span><span class="nf">NewGlossaryPlugin</span><span class="p">())</span>
</span></span></code></pre><hr>
<h3 id="csv-fence">csv_fence <a href="#csv-fence" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>csv_fence</code><br>
<strong>Stage:</strong> Render (post_render)<br>
<strong>Purpose:</strong> Converts CSV code blocks into HTML tables for easy data display.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">markata</span><span class="p">.</span><span class="nx">csv_fence</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>          <span class="c"># Enable the plugin (default: true when configured)</span>
</span></span><span class="line"><span class="cl"><span class="nx">table_class</span> <span class="p">=</span> <span class="s2">&#34;csv-table&#34;</span>  <span class="c"># CSS class for generated tables (default)</span>
</span></span><span class="line"><span class="cl"><span class="nx">has_header</span> <span class="p">=</span> <span class="kc">true</span>       <span class="c"># Treat first row as header (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">delimiter</span> <span class="p">=</span> <span class="s2">&#34;,&#34;</span>         <span class="c"># CSV field delimiter (default: &#34;,&#34;)</span>
</span></span></code></pre><p><strong>Markdown usage:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="s">```csv
</span></span></span><span class="line"><span class="cl"><span class="s"></span>Name,Age,City
</span></span><span class="line"><span class="cl">Alice,30,New York
</span></span><span class="line"><span class="cl">Bob,25,Los Angeles
</span></span><span class="line"><span class="cl">Charlie,35,Chicago
</span></span><span class="line"><span class="cl"><span class="s">```</span>
</span></span></code></pre><p><strong>Per-block options:</strong>
You can override global settings per code block:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">```csv delimiter=&#34;;&#34; has_header=&#34;false&#34; table_class=&#34;data-table&#34;
</span></span><span class="line"><span class="cl">Alice;30;New York
</span></span><span class="line"><span class="cl">Bob;25;Los Angeles
</span></span><span class="line"><span class="cl">```
</span></span></code></pre><p><strong>Behavior:</strong></p>
<ol>
<li>Finds code blocks with <code>language-csv</code> class in <code>ArticleHTML</code></li>
<li>Parses the CSV content with the configured delimiter</li>
<li>Generates an HTML table with <code>&lt;thead&gt;</code> (if <code>has_header</code>) and <code>&lt;tbody&gt;</code></li>
<li>Properly escapes all cell content for HTML safety</li>
</ol>
<p><strong>HTML output:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;csv-table&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>City<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Alice<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>30<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>New York<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Bob<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>25<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Los Angeles<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Charlie<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>35<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Chicago<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>CSS styling:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">.</span><span class="nc">csv-table</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">border-collapse</span><span class="p">:</span> <span class="kc">collapse</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">margin</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">csv-table</span> <span class="nt">th</span><span class="o">,</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">csv-table</span> <span class="nt">td</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">padding</span><span class="p">:</span> <span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">text-align</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">csv-table</span> <span class="nt">th</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="mh">#f5f5f5</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">csv-table</span> <span class="nt">tr</span><span class="p">:</span><span class="nd">nth-child</span><span class="o">(</span><span class="nt">even</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="mh">#fafafa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p><strong>Enabling the plugin:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">plugins</span> <span class="o">:=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">plugins</span><span class="p">.</span><span class="nf">DefaultPlugins</span><span class="p">(),</span> <span class="nx">plugins</span><span class="p">.</span><span class="nf">NewCSVFencePlugin</span><span class="p">())</span>
</span></span></code></pre><p>Or by name:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">pluginList</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">plugins</span><span class="p">.</span><span class="nf">PluginsByNames</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... default plugins ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s">&#34;csv_fence&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre><hr>
<h2 id="cleanup-stage">Cleanup Stage <a href="#cleanup-stage" class="heading-anchor">#</a></h2>
<h3 id="pagefind">pagefind <a href="#pagefind" class="heading-anchor">#</a></h3>
<p><strong>Name:</strong> <code>pagefind</code><br>
<strong>Stage:</strong> Cleanup<br>
<strong>Priority:</strong> Last (runs after all files are written)<br>
<strong>Purpose:</strong> Generates a full-text search index using <a href="https://pagefind.app/">Pagefind</a> after the site is built.</p>
<p><strong>Configuration (TOML):</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">search</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">true</span>              <span class="c"># Enable/disable search (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">position</span> <span class="p">=</span> <span class="s2">&#34;navbar&#34;</span>         <span class="c"># Search UI position: navbar, sidebar, footer, custom</span>
</span></span><span class="line"><span class="cl"><span class="nx">placeholder</span> <span class="p">=</span> <span class="s2">&#34;Search...&#34;</span>   <span class="c"># Search input placeholder text</span>
</span></span><span class="line"><span class="cl"><span class="nx">show_images</span> <span class="p">=</span> <span class="kc">true</span>          <span class="c"># Show thumbnails in results (default: true)</span>
</span></span><span class="line"><span class="cl"><span class="nx">excerpt_length</span> <span class="p">=</span> <span class="mi">200</span>        <span class="c"># Characters for result excerpts (default: 200)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">search</span><span class="p">.</span><span class="nx">pagefind</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">bundle_dir</span> <span class="p">=</span> <span class="s2">&#34;_pagefind&#34;</span>    <span class="c"># Output directory for search index (default)</span>
</span></span><span class="line"><span class="cl"><span class="nx">root_selector</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>          <span class="c"># CSS selector for searchable content (optional)</span>
</span></span><span class="line"><span class="cl"><span class="nx">exclude_selectors</span> <span class="p">=</span> <span class="p">[]</span>      <span class="c"># CSS selectors to exclude from indexing</span>
</span></span></code></pre><p><strong>Options:</strong></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable/disable search functionality</td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>&quot;navbar&quot;</code></td>
<td>Where to show search UI</td>
</tr>
<tr>
<td><code>placeholder</code></td>
<td><code>&quot;Search...&quot;</code></td>
<td>Search input placeholder</td>
</tr>
<tr>
<td><code>show_images</code></td>
<td><code>true</code></td>
<td>Show thumbnails in results</td>
</tr>
<tr>
<td><code>excerpt_length</code></td>
<td><code>200</code></td>
<td>Characters for result excerpts</td>
</tr>
<tr>
<td><code>pagefind.bundle_dir</code></td>
<td><code>&quot;_pagefind&quot;</code></td>
<td>Output directory for index</td>
</tr>
<tr>
<td><code>pagefind.root_selector</code></td>
<td><code>&quot;&quot;</code></td>
<td>CSS selector for searchable content</td>
</tr>
<tr>
<td><code>pagefind.exclude_selectors</code></td>
<td><code>[]</code></td>
<td>Elements to exclude from indexing</td>
</tr>
</tbody>
</table>
<p><strong>Requirements:</strong></p>
<ul>
<li>Pagefind CLI must be installed: <code>npm install -g pagefind</code></li>
<li>If not installed, the plugin logs a warning but does not fail the build</li>
</ul>
<p><strong>Behavior:</strong></p>
<ol>
<li>Runs in Cleanup stage with <code>PriorityLast</code> (after all HTML files are written)</li>
<li>Checks if search is enabled in configuration</li>
<li>Checks if <code>pagefind</code> CLI is available in PATH</li>
<li>Executes <code>pagefind --site {output_dir}</code> with configured options</li>
<li>Generates search index in <code>{output_dir}/_pagefind/</code></li>
</ol>
<p><strong>Generated files:</strong></p>
<pre><code>output/
  _pagefind/
    pagefind.js           # Main search library
    pagefind-ui.js        # UI component
    pagefind-ui.css       # UI styles
    pagefind.*.pf_index   # Index chunks
    pagefind.*.pf_meta    # Metadata chunks
</code></pre>
<p><strong>Template integration:</strong></p>
<p>The default post template includes <code>data-pagefind-*</code> attributes for indexing:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">article</span> <span class="na">data-pagefind-body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span> <span class="na">data-pagefind-meta</span><span class="o">=</span><span class="s">&#34;title&#34;</span><span class="p">&gt;</span>{{ post.title }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span> <span class="na">data-pagefind-meta</span><span class="o">=</span><span class="s">&#34;excerpt&#34;</span><span class="p">&gt;</span>{{ post.description }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    {% for tag in post.tags %}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">data-pagefind-filter</span><span class="o">=</span><span class="s">&#34;tag&#34;</span> <span class="na">style</span><span class="o">=</span><span class="s">&#34;display:none&#34;</span><span class="p">&gt;</span>{{ tag }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {% endfor %}
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;content&#34;</span><span class="p">&gt;</span>{{ body | safe }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
</span></span></code></pre><p><strong>Search UI component:</strong></p>
<p>The base template includes the search component:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">{% if config.search.enabled %}
</span></span><span class="line"><span class="cl">{% include &#34;components/search.html&#34; %}
</span></span><span class="line"><span class="cl">{% endif %}
</span></span></code></pre><p><strong>Disabling search:</strong></p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="p">[</span><span class="nx">search</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">enabled</span> <span class="p">=</span> <span class="kc">false</span>
</span></span></code></pre><p><strong>Graceful degradation:</strong></p>
<ul>
<li>If Pagefind is not installed, search UI is hidden</li>
<li>If search is disabled, no index is generated</li>
<li>Site functions normally without search functionality</li>
</ul>
<p>See <a href="/search/" class="wikilink" data-title="Search" data-description="This document specifies the search functionality for markata-go sites using Pagefind.">Search Guide</a> for detailed usage and customization.</p>
<hr>
<h2 id="disabling-plugins">Disabling Plugins <a href="#disabling-plugins" class="heading-anchor">#</a></h2>
<p>To use only specific plugins, configure them explicitly:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;github.com/example/markata-go/pkg/plugins&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Minimal set for basic builds
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">minimalPlugins</span> <span class="o">:=</span> <span class="nx">plugins</span><span class="p">.</span><span class="nf">MinimalPlugins</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Or pick specific plugins
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">customPlugins</span> <span class="o">:=</span> <span class="p">[]</span><span class="nx">lifecycle</span><span class="p">.</span><span class="nx">Plugin</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="p">.</span><span class="nf">NewGlobPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="p">.</span><span class="nf">NewLoadPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="p">.</span><span class="nf">NewRenderMarkdownPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="nx">plugins</span><span class="p">.</span><span class="nf">NewPublishHTMLPlugin</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p>Or use plugin names:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">pluginList</span><span class="p">,</span> <span class="nx">warnings</span> <span class="o">:=</span> <span class="nx">plugins</span><span class="p">.</span><span class="nf">PluginsByNames</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;glob&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;load&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;render_markdown&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;publish_html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre><hr>
<h2 id="creating-custom-plugins">Creating Custom Plugins <a href="#creating-custom-plugins" class="heading-anchor">#</a></h2>
<p>Implement the <code>lifecycle.Plugin</code> interface and optionally stage-specific interfaces:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MyPlugin</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">MyPlugin</span><span class="p">)</span> <span class="nf">Name</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s">&#34;my_plugin&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Implement stage interfaces as needed:
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.ConfigurePlugin
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.GlobPlugin
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.LoadPlugin
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.TransformPlugin
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.RenderPlugin
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.CollectPlugin
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.WritePlugin
</span></span></span><span class="line"><span class="cl"><span class="c1">// - lifecycle.CleanupPlugin
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">MyPlugin</span><span class="p">)</span> <span class="nf">Transform</span><span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">lifecycle</span><span class="p">.</span><span class="nx">Manager</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nf">ProcessPostsConcurrently</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">post</span> <span class="o">*</span><span class="nx">models</span><span class="p">.</span><span class="nx">Post</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Process each post
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">post</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;my_field&#34;</span><span class="p">,</span> <span class="s">&#34;my_value&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre><p>Register your plugin:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">plugins</span><span class="p">.</span><span class="nf">RegisterPluginConstructor</span><span class="p">(</span><span class="s">&#34;my_plugin&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">()</span> <span class="nx">lifecycle</span><span class="p">.</span><span class="nx">Plugin</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&amp;</span><span class="nx">MyPlugin</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre><p>See <a href="/plugin-development/" class="wikilink" data-title="Plugin Development" data-description="Guide to creating custom plugins for markata-go using the 9-stage lifecycle" data-date="2024-01-15">Plugin Development Guide</a> for complete instructions.</p>

        </div>
    </article>
    
    








</div>

    </main>
    
    
    





<footer class="site-footer" data-pagefind-ignore>
    <div class="container">
        
        
        
        
        
        <p class="footer-copyright">&copy;  . Built with <a href="https://github.com/WaylonWalker/markata-go">markata-go</a>.</p>
        
    </div>
</footer>



    
    
    
    
    <script src="/js/tooltips.js" defer></script>
    
    <!-- Pagefind Search JS -->
    
    <script src="/_pagefind/pagefind-ui.js" defer></script>
    <script>
        window.addEventListener('DOMContentLoaded', function() {
            if (typeof PagefindUI !== 'undefined') {
                new PagefindUI({
                    element: "#pagefind-search",
                    showImages: true,
                    excerptLength: 200,
                    showSubResults: true,
                    translations: {
                        placeholder: "Search..."
                    }
                });
            }
        });
    </script>
    
</body>
</html>
