{# Documentation Layout - 3-panel layout with sidebar, content, and TOC #}
{% extends "base.html" %}

{% block title %}{{ post.title | default:config.title | default:'My Site' }}{% endblock %}
{% block description %}{{ post.description | default:config.description | default:'' }}{% endblock %}

{% block body_class %}layout layout--docs{% endblock %}

{% block header %}
<header class="site-header site-header--{{ config.layout.docs.header_style | default:'minimal' }}{% if config.header.sticky %} site-header--sticky{% endif %}" data-pagefind-ignore>
    <div class="container">
        {% if config.header.show_logo or config.header.show_title %}
        <a href="/" class="site-title">
            {% if config.header.show_logo and config.logo %}
            <img src="{{ config.logo }}" alt="{{ config.title }}" class="site-logo">
            {% endif %}
            {% if config.header.show_title %}{{ config.title | default:"Home" }}{% endif %}
        </a>
        {% endif %}
        {% if config.header.show_nav %}
        {% include "components/nav.html" %}
        {% endif %}
        <div class="header-actions">
            {% if config.search.enabled and config.header.show_search %}
            {% include "components/search.html" %}
            {% endif %}
            {% if config.header.show_theme_toggle %}
            <button class="theme-toggle" type="button" aria-label="Toggle theme">
                <span class="theme-toggle-icon" aria-hidden="true"></span>
            </button>
            {% endif %}
            <button class="mobile-menu-toggle" type="button" aria-label="Toggle navigation" aria-expanded="false" aria-controls="sidebar">
                <span class="hamburger-line" aria-hidden="true"></span>
                <span class="hamburger-line" aria-hidden="true"></span>
                <span class="hamburger-line" aria-hidden="true"></span>
            </button>
        </div>
    </div>
</header>
{% endblock %}

{% block main %}
<div class="layout-container">
    {% if config.sidebar.enabled %}
    <aside class="layout-sidebar layout-sidebar--{{ config.layout.docs.sidebar_position | default:'left' }}"
           id="sidebar"
           role="navigation"
           aria-label="Documentation navigation"
           data-collapsible="{{ config.layout.docs.sidebar_collapsible | default:true | yesno:'true,false' }}"
           data-open="{{ config.layout.docs.sidebar_default_open | default:true | yesno:'true,false' }}"
           style="--sidebar-width: {{ config.layout.docs.sidebar_width | default:'280px' }}">
        <div class="sidebar-content">
            {% include "components/sidebar_nav.html" %}
        </div>
    </aside>
    <div class="sidebar-overlay"></div>
    {% endif %}

    <main class="layout-content" id="main-content" tabindex="-1" style="--content-max-width: {{ config.layout.docs.content_max_width | default:'800px' }}">
        <article class="post">
            <header class="post-header">
                <h1>{{ post.title }}</h1>
                {% if post.description %}
                <p class="post-description">{{ post.description }}</p>
                {% endif %}
            </header>
            <div class="post-content{% if post.css_class %} {{ post.css_class }}{% endif %}">
                {{ body | safe }}
            </div>
        </article>
    </main>

    {% if config.toc.enabled and post.toc %}
    <aside class="layout-toc layout-toc--{{ config.layout.docs.toc_position | default:'right' }}"
           role="complementary"
           aria-label="Table of Contents"
           data-collapsible="{{ config.layout.docs.toc_collapsible | default:true | yesno:'true,false' }}"
           data-open="{{ config.layout.docs.toc_default_open | default:true | yesno:'true,false' }}"
           style="--toc-width: {{ config.layout.docs.toc_width | default:'220px' }}">
        <div class="toc-content">
            <h2 class="toc-title">{{ config.toc.title | default:'On this page' }}</h2>
            {% include "components/toc_list.html" %}
        </div>
    </aside>
    {% endif %}
</div>
{% endblock %}

{% block footer %}
{% if config.layout.docs.footer_style != 'none' %}
{% with footer_style=config.layout.docs.footer_style|default:"minimal" %}
{% include "components/footer.html" %}
{% endwith %}
{% endif %}
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ 'js/layout.js' | theme_asset }}" defer></script>
{% if config.toc.scroll_spy %}
<script src="{{ 'js/scroll-spy.js' | theme_asset }}" defer></script>
{% endif %}
{% endblock %}
