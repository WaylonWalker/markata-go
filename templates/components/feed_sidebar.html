{# Feed sidebar component template #}
{# Usage: {% include "components/feed_sidebar.html" %} #}
{# Shows navigation links for posts in the same feed/series #}
{# Requires: config.components.feed_sidebar (FeedSidebarConfig) #}

{% with sidebar = config.components.feed_sidebar %}
{% if sidebar.enabled %}
<aside class="feed-sidebar feed-sidebar--{{ sidebar.position | default:'left' }}" style="width: {{ sidebar.width | default:'250px' }}" aria-label="Feed navigation" data-pagefind-ignore>
    <nav class="feed-nav">
        {% if sidebar.title %}
        <h2 class="feed-nav-title">{{ sidebar.title }}</h2>
        {% elif feed.title %}
        <h2 class="feed-nav-title">{{ feed.title }}</h2>
        {% else %}
        <h2 class="feed-nav-title">In this series</h2>
        {% endif %}
        
        {% if feed.posts %}
        <ul class="feed-nav-list">
            {% for p in feed.posts %}
            <li class="feed-nav-item{% if post.slug == p.slug %} feed-nav-item--active{% endif %}">
                <a href="{{ p.href }}" class="feed-nav-link">
                    {{ p.title | default:p.slug }}
                </a>
            </li>
            {% endfor %}
        </ul>
        {% elif posts %}
        <ul class="feed-nav-list">
            {% for p in posts %}
            <li class="feed-nav-item{% if post.slug == p.slug %} feed-nav-item--active{% endif %}">
                <a href="{{ p.href }}" class="feed-nav-link">
                    {{ p.title | default:p.slug }}
                </a>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="feed-nav-empty">No posts in this series.</p>
        {% endif %}
    </nav>
</aside>
{% endif %}
{% endwith %}
