{# Photo Card - Image/video prominent for shots, photos, gallery posts #}
{# Large media with aspect-ratio, caption/description below #}
{# Auto-detects video files by extension: .mp4, .webm, .mov, .m4v, .ogv #}
{# Supports both image and video frontmatter fields interchangeably #}
<article class="card card-photo h-entry">
  {% with post.image|media_url:post.video as media_src %}
  {% if media_src %}
  <a href="{{ post.href }}" class="card-image-link u-url">
    {% if media_src|is_video %}
    <video class="card-image u-video" autoplay muted loop playsinline>
      <source src="{{ media_src }}" type="video/{% with media_src|lower as src_lower %}{% if src_lower|endswith:".mp4" or src_lower|endswith:".m4v" %}mp4{% elif src_lower|endswith:".webm" %}webm{% elif src_lower|endswith:".mov" %}quicktime{% else %}ogg{% endif %}{% endwith %}">
    </video>
    {% else %}
    <img src="{{ media_src }}" alt="{{ post.title | default:post.description | default:'Photo' }}" class="card-image u-photo" width="1200" height="675" loading="lazy">
    {% endif %}
  </a>
  {% endif %}
  {% endwith %}

  <div class="card-body">
    {% if post.title %}
    <h3 class="card-title p-name"><a href="{{ post.href }}">{{ post.title }}</a></h3>
    {% endif %}

    {% if post.description %}
    <p class="card-caption p-summary">{{ post.description }}</p>
    {% endif %}

    <footer class="card-meta">
      {% if post.date %}
      <time class="dt-published" datetime="{{ post.date | atom_date }}">{{ post.date | date:"January 2, 2006" }}</time>
      {% endif %}
    </footer>
  </div>
</article>
