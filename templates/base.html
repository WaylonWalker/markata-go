<!DOCTYPE html>
<html lang="{{ config.lang | default:'en' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% if post %}{{ post.title }} - {% endif %}{{ config.title | default:"My Site" }}{% endblock %}</title>
    {% if post.description %}<meta name="description" content="{{ post.description }}">{% elif config.description %}<meta name="description" content="{{ config.description }}">{% endif %}
    
    <!-- Open Graph -->
    {% if post %}
    <meta property="og:title" content="{{ post.title }}">
    <meta property="og:description" content="{{ post.description | default:config.description }}">
    <meta property="og:url" content="{{ config.url }}{{ post.slug }}/">
    <meta property="og:type" content="article">
    {% if post.cover_image %}<meta property="og:image" content="{{ config.url }}{{ post.cover_image }}">{% elif config.seo.default_image %}<meta property="og:image" content="{{ config.url }}{{ config.seo.default_image }}">{% endif %}
    {% else %}
    <meta property="og:title" content="{{ config.title }}">
    <meta property="og:description" content="{{ config.description }}">
    <meta property="og:url" content="{{ config.url }}">
    <meta property="og:type" content="website">
    {% if config.seo.default_image %}<meta property="og:image" content="{{ config.url }}{{ config.seo.default_image }}">{% endif %}
    {% endif %}
    <meta property="og:site_name" content="{{ config.title }}">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    {% if config.seo.twitter_handle %}<meta name="twitter:site" content="@{{ config.seo.twitter_handle }}">{% endif %}
    {% if post %}
    <meta name="twitter:title" content="{{ post.title }}">
    <meta name="twitter:description" content="{{ post.description | default:config.description }}">
    {% if post.cover_image %}<meta name="twitter:image" content="{{ config.url }}{{ post.cover_image }}">{% elif config.seo.default_image %}<meta name="twitter:image" content="{{ config.url }}{{ config.seo.default_image }}">{% endif %}
    {% else %}
    <meta name="twitter:title" content="{{ config.title }}">
    <meta name="twitter:description" content="{{ config.description }}">
    {% if config.seo.default_image %}<meta name="twitter:image" content="{{ config.url }}{{ config.seo.default_image }}">{% endif %}
    {% endif %}
    
    {% block head %}
    <!-- Theme CSS -->
    <link rel="stylesheet" href="{{ 'css/variables.css' | theme_asset }}">
    <link rel="stylesheet" href="{{ 'css/main.css' | theme_asset }}">
    <link rel="stylesheet" href="{{ 'css/admonitions.css' | theme_asset }}">
    <link rel="stylesheet" href="{{ 'css/code.css' | theme_asset }}">
    
    <!-- RSS/Atom Feeds -->
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml">
    {% endblock %}
    
    <!-- Schema.org JSON-LD -->
    {% if post %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ post.title }}",
      "description": "{{ post.description | default:config.description }}",
      "datePublished": "{{ post.date }}",
      "author": {
        "@type": "Person",
        "name": "{{ config.author }}"
      },
      "publisher": {
        "@type": "Organization",
        "name": "{{ config.title }}"{% if config.seo.logo_url %},
        "logo": {
          "@type": "ImageObject",
          "url": "{{ config.url }}{{ config.seo.logo_url }}"
        }{% endif %}
      }{% if post.cover_image %},
      "image": "{{ config.url }}{{ post.cover_image }}"{% elif config.seo.default_image %},
      "image": "{{ config.url }}{{ config.seo.default_image }}"{% endif %}
    }
    </script>
    {% else %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "{{ config.title }}",
      "description": "{{ config.description }}",
      "url": "{{ config.url }}"{% if config.seo.logo_url %},
      "publisher": {
        "@type": "Organization",
        "name": "{{ config.title }}",
        "logo": {
          "@type": "ImageObject",
          "url": "{{ config.url }}{{ config.seo.logo_url }}"
        }
      }{% endif %}
    }
    </script>
    {% endif %}
</head>
<body>
    {% block header %}
    <header class="site-header">
        <div class="container">
            <a href="/" class="site-title">{{ config.title | default:"Home" }}</a>
            <nav class="site-nav">
                {% if config.nav %}
                    {% for item in config.nav %}
                <a href="{{ item.url }}"{% if item.external %} target="_blank" rel="noopener noreferrer"{% endif %}>{{ item.label }}</a>
                    {% endfor %}
                {% else %}
                <a href="/blog/">Blog</a>
                {% endif %}
            </nav>
        </div>
    </header>
    {% endblock %}
    
    <main>
        {% block content %}{% endblock %}
    </main>
    
    {% block footer %}
    <footer class="site-footer">
        <div class="container">
            {% if config.footer.text %}
            <p>{{ config.footer.text }}</p>
            {% else %}
            <p>&copy; {{ "now" | date:"2006" }} {{ config.author | default:"" }}. Built with <a href="https://github.com/WaylonWalker/markata-go">markata-go</a>.</p>
            {% endif %}
        </div>
    </footer>
    {% endblock %}
    
    {% block scripts %}{% endblock %}
</body>
</html>
