{# Blogroll Page - List of feeds the site author follows #}
{% extends "base.html" %}

{% block title %}{{ title | default:"Blogroll" }} - {{ config.title | default:"My Site" }}{% endblock %}

{% block body_class %}page-blogroll{% endblock %}

{% block content %}
<div class="blogroll-page">
  <header class="blogroll-header">
    <h1>{{ title | default:"Blogroll" }}</h1>
    <p class="blogroll-subtitle">{{ description | default:"Blogs and feeds I follow" }}</p>
    <p class="blogroll-count">{{ feed_count }} feeds</p>
  </header>

  <nav class="blogroll-nav" aria-label="Page navigation">
    <a href="/reader/">View Reader</a>
  </nav>

  {% for category in categories %}
  <section class="blogroll-category" id="category-{{ category.slug }}">
    <h2>{{ category.name }}</h2>
    <div class="blogroll-grid">
      {% for feed in category.feeds %}
      <article class="blogroll-card">
        {% if feed.avatar_url %}
        <img src="{{ feed.avatar_url }}" alt="{{ feed.title }}" class="blogroll-card-avatar" loading="lazy">
        {% elif feed.image_url %}
        <img src="{{ feed.image_url }}" alt="{{ feed.title }}" class="blogroll-card-avatar" loading="lazy">
        {% else %}
        <div class="blogroll-card-avatar-placeholder" aria-hidden="true">
          {{ feed.title|default:'?'|first|upper }}
        </div>
        {% endif %}
        <h3 class="blogroll-card-title">
          {% if feed.site_url %}
          <a href="{{ feed.site_url }}" target="_blank" rel="noopener">{{ feed.title }}</a>
          {% else %}
          {{ feed.title }}
          {% endif %}
        </h3>
        {% if feed.description %}
        <p class="blogroll-card-description">{{ feed.description | truncatewords:25 }}</p>
        {% endif %}
        <footer class="blogroll-card-meta">
          <span class="blogroll-card-count">{{ feed.entry_count }} posts</span>
          {% if feed.feed_url %}
          <a href="{{ feed.feed_url }}" class="blogroll-card-feed" title="RSS Feed">RSS</a>
          {% endif %}
        </footer>
      </article>
      {% endfor %}
    </div>
  </section>
  {% endfor %}
</div>
{% endblock %}
