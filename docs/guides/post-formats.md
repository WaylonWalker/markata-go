---
title: "Post Output Formats"
description: "Configure multiple output formats for posts including HTML, Markdown source, plain text, and OpenGraph cards"
date: 2026-01-22
published: true
tags:
  - configuration
  - output
  - social-media
  - content-negotiation
---

# Post Output Formats

markata-go can generate multiple output formats for each post beyond the standard HTML. This enables use cases like providing raw markdown for API consumers, plain text for accessibility, or generating social media preview cards.

## Configuration

Configure output formats in your `markata-go.toml`:

```toml
[markata-go.post_formats]
html = true       # Standard HTML (default: true)
markdown = false  # Raw markdown source
text = false      # Plain text output
og = false        # OpenGraph card HTML
```

## Available Formats

### HTML (default)

The standard HTML output, generated by default.

**Output:** `/your-post/index.html`

```toml
[markata-go.post_formats]
html = true  # This is the default
```

### Markdown

Outputs the raw markdown source with reconstructed frontmatter. Useful for:
- "View Source" links on your site
- API consumers who want raw content
- Copy-paste workflows

**Output:** `/your-post/index.md` (with redirect from `/your-post.md`)

```toml
[markata-go.post_formats]
markdown = true
```

The markdown output includes the original frontmatter:

```markdown
---
title: "Your Post Title"
description: "Post description"
date: 2026-01-22
published: true
tags:
  - example
---

Your original markdown content...
```

### Plain Text

Outputs a plain text version of the content, perfect for:
- Screen readers and accessibility tools
- Command-line readers (curl, wget)
- Low-bandwidth situations
- Text-based browsers

**Output:** `/your-post/index.txt` (with redirect from `/your-post.txt`)

```toml
[markata-go.post_formats]
text = true
```

The text output includes:
- Title (underlined with `=`)
- Description (if present)
- Date
- Raw markdown content

Example output:
```
My Post Title
=============

A description of the post.

Date: January 22, 2026

The actual content of the post in plain text form...
```

### OpenGraph Card (OG)

Generates a special HTML page optimized for screenshot tools to create social media preview images. The page is sized at 1200x630 pixels (standard OG image dimensions).

**Output:** `/your-post/og/index.html`

```toml
[markata-go.post_formats]
og = true
```

#### Using OG Cards for Social Images

The OG card HTML is designed to be captured by screenshot tools like Puppeteer or Playwright:

```javascript
// Example with Puppeteer
const browser = await puppeteer.launch();
const page = await browser.newPage();
await page.setViewport({ width: 1200, height: 630 });
await page.goto('https://yoursite.com/your-post/og/');
await page.screenshot({ path: 'og-image.png' });
```

The default OG card template includes:
- Post title (large, prominent)
- Post description (if available)
- Up to 3 tags
- Site title
- Publication date

You can customize the OG card appearance by providing your own `og.html` template.

## Clean URL Redirects

For convenience, markata-go generates redirect files that allow cleaner URLs for alternate formats:

| User requests | Redirects to |
|---------------|--------------|
| `/my-post.md` | `/my-post/index.md` |
| `/my-post.txt` | `/my-post/index.txt` |

This means users can type `example.com/my-post.md` directly in their browser or use it with command-line tools:

```bash
# Both of these work:
curl https://example.com/my-post.md
curl https://example.com/my-post/index.md
```

The redirects use HTML meta refresh for maximum compatibility across browsers and HTTP clients.

## Visible Format Links

When you enable alternate formats, markata-go automatically displays format links on your posts and feeds. These appear in the post footer (for posts) or feed header (for feeds).

For posts with `markdown`, `text`, or `og` enabled, visitors see:
- **View as:** Markdown | Text | Card

For feeds, visitors see subscription options:
- **Subscribe:** RSS | Atom | JSON | Markdown | Text

## Content Negotiation

markata-go's directory-based URL structure (`/slug/index.html`, `/slug/index.md`, `/slug/index.txt`) enables server-side content negotiation. This allows clients to request their preferred format using HTTP `Accept` headers.

### How It Works

Instead of requesting a specific file, clients request the directory URL:
```
GET /my-post/
Accept: text/plain
```

The server returns the appropriate format based on the `Accept` header.

### Nginx Configuration

```nginx
server {
    listen 80;
    server_name example.com;
    root /var/www/html;

    location / {
        # Try the requested URI, then index files based on Accept header
        try_files $uri $uri/ @negotiate;
    }

    location @negotiate {
        # Map Accept header to file extension
        set $ext "html";
        
        if ($http_accept ~* "text/plain") {
            set $ext "txt";
        }
        if ($http_accept ~* "text/markdown") {
            set $ext "md";
        }
        
        # Try the negotiated format
        try_files $uri/index.$ext $uri/index.html =404;
    }
}
```

### Caddy Configuration

```caddyfile
example.com {
    root * /var/www/html
    file_server
    
    @wantsText {
        header Accept *text/plain*
    }
    @wantsMarkdown {
        header Accept *text/markdown*
    }
    
    # Rewrite to plain text when requested
    rewrite @wantsText {path}/index.txt
    
    # Rewrite to markdown when requested
    rewrite @wantsMarkdown {path}/index.md
    
    # Default to HTML
    try_files {path} {path}/index.html {path}.html
}
```

### Apache Configuration

```apache
<VirtualHost *:80>
    ServerName example.com
    DocumentRoot /var/www/html
    
    # Enable content negotiation
    Options +MultiViews
    
    # Define type mappings
    AddType text/html .html
    AddType text/markdown .md
    AddType text/plain .txt
    
    # Prefer HTML by default
    DirectoryIndex index.html index.md index.txt
</VirtualHost>
```

### Testing Content Negotiation

Use `curl` to test different formats:

```bash
# Request HTML (default)
curl https://example.com/my-post/

# Request plain text
curl -H "Accept: text/plain" https://example.com/my-post/

# Request markdown
curl -H "Accept: text/markdown" https://example.com/my-post/

# Request with quality values
curl -H "Accept: text/plain;q=0.9, text/html;q=0.8" https://example.com/my-post/
```

## Homepage with index.md

markata-go provides special handling for `index.md` files to create homepages and directory-based URLs:

| File Path | Generated URL |
|-----------|---------------|
| `./index.md` | `/` (homepage) |
| `docs/index.md` | `/docs/` |
| `blog/guides/index.md` | `/blog/guides/` |

### Creating a Homepage

Simply create an `index.md` file in your content root:

```markdown
---
title: "Welcome to My Site"
description: "A personal blog about programming"
published: true
template: home.html
---

# Welcome

This is my homepage content...
```

This generates `/index.html` as your site's homepage, allowing custom content instead of requiring a feed with empty slug.

### Directory Index Pages

Create `index.md` files in subdirectories for section landing pages:

```
docs/
  index.md          -> /docs/
  getting-started.md -> /docs/getting-started/
  guides/
    index.md        -> /docs/guides/
    advanced.md     -> /docs/guides/advanced/
```

## Example Configuration

A typical configuration enabling all formats:

```toml
[markata-go]
url = "https://example.com"
title = "My Site"

[markata-go.post_formats]
html = true      # Standard pages
markdown = true  # View source support
text = true      # Plain text for accessibility
og = true        # Social card generation
```

## Automation Example

Here's a complete workflow for generating social images:

1. **Enable OG format** in your config:
   ```toml
   [markata-go.post_formats]
   og = true
   ```

2. **Build your site**:
   ```bash
   markata-go build
   ```

3. **Generate screenshots** with a script:
   ```bash
   #!/bin/bash
   for og_page in output/*/og/index.html; do
     post_dir=$(dirname $(dirname "$og_page"))
     slug=$(basename "$post_dir")
     npx puppeteer screenshot \
       --viewport 1200x630 \
       "file://$og_page" \
       "$post_dir/og-image.png"
   done
   ```

4. **Reference in templates**:
   ```html
   <meta property="og:image" content="{{ config.url }}{{ post.href }}og-image.png">
   ```

## See Also

- [Configuration Guide](./configuration.md) - Full configuration reference
- [Templates Guide](./templates.md) - Customizing templates including og.html
- [Deployment Guide](./deployment.md) - Deploying your generated site
